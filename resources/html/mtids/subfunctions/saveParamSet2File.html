<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of saveParamSet2File</title>
  <meta name="keywords" content="saveParamSet2File">
  <meta name="description" content="SAVEPARAMSET2FILE storing parameter set for a template">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">mtids</a> &gt; <a href="index.html">subfunctions</a> &gt; saveParamSet2File.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mtids\subfunctions&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>saveParamSet2File
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>SAVEPARAMSET2FILE storing parameter set for a template</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function varargout = saveParamSet2File( varargin ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">SAVEPARAMSET2FILE storing parameter set for a template

 This function saves a parameter value set for a still existing dynamic
 template.

 INPUT:    (1) -- Figure handle to uicontrol-object 'Edit Text', which 
                   specifies variables, which depend on the input signal 
                   size of the template
           (2) -- Figure handle to uicontrol-object 'Edit Text', which
                   specifies the number of internal inputs, e.g. feedback
                   loops
           (3) -- Name of template, to which a parameter set should be saved
           (4) -- Figure handle to uicontrol-object 'Edit Text', where
                   the name of the param set was prompted
           (5) -- Main part of the parameter set, is stored in table, if
                   a GUI is used.
           (6) -- States dimension of a template with an explicit
                   numerical parametrization
           (7) -- Pathname of the .mat-file, where at least one parameter
                   set must be stored yet
           (8) -- Flag 'enable overwrite'; if '1', the user will be asked,
                   if a still existing set (with identical name) should be
                   overwritten

 OUTPUT:   (1) -- Boolean; '1' for being successful
           (2) -- Char array with error message in case of fail; if saving
                   was sucessfull, the array is empty

 Author: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)
 Project: MTIDS (http://code.google.com/p/mtids/)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>	load(g,filename) --- read a saved graph on disk</li><li><a href="../../mtids/subfunctions/matgraph/@graph/save.html" class="code" title="function save(g,filename)">save</a>	save(g,filename) --- save a graph to disk</li><li><a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>	size(g) --- returns [nv,ne] for the graph</li><li><a href="../../mtids/subfunctions/matgraph/@partition/size.html" class="code" title="function s = size(p)">size</a>	size(p) --- returns [nv,np]: number of vertices, parts.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../mtids/subfunctions/figures/edit_paramValues.html" class="code" title="function varargout = edit_paramValues(varargin)">edit_paramValues</a>	EDIT_PARAMVALUES gui to edit numerical parameter values of a template</li><li><a href="../../mtids/subfunctions/figures/import_dynamic_params.html" class="code" title="function varargout = import_dynamic_params(varargin)">import_dynamic_params</a>	IMPORT_DYNAMIC_PARAMS gui for importing tempates to MTIDS</li><li><a href="../../mtids/subfunctions/figures/manageParamSets.html" class="code" title="function varargout = manageParamSets(varargin)">manageParamSets</a>	MANAGEPARAMSETS gui for managing templates and its numerical parameter sets</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = saveParamSet2File( varargin )</a>
0002 <span class="comment">%SAVEPARAMSET2FILE storing parameter set for a template</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% This function saves a parameter value set for a still existing dynamic</span>
0005 <span class="comment">% template.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% INPUT:    (1) -- Figure handle to uicontrol-object 'Edit Text', which</span>
0008 <span class="comment">%                   specifies variables, which depend on the input signal</span>
0009 <span class="comment">%                   size of the template</span>
0010 <span class="comment">%           (2) -- Figure handle to uicontrol-object 'Edit Text', which</span>
0011 <span class="comment">%                   specifies the number of internal inputs, e.g. feedback</span>
0012 <span class="comment">%                   loops</span>
0013 <span class="comment">%           (3) -- Name of template, to which a parameter set should be saved</span>
0014 <span class="comment">%           (4) -- Figure handle to uicontrol-object 'Edit Text', where</span>
0015 <span class="comment">%                   the name of the param set was prompted</span>
0016 <span class="comment">%           (5) -- Main part of the parameter set, is stored in table, if</span>
0017 <span class="comment">%                   a GUI is used.</span>
0018 <span class="comment">%           (6) -- States dimension of a template with an explicit</span>
0019 <span class="comment">%                   numerical parametrization</span>
0020 <span class="comment">%           (7) -- Pathname of the .mat-file, where at least one parameter</span>
0021 <span class="comment">%                   set must be stored yet</span>
0022 <span class="comment">%           (8) -- Flag 'enable overwrite'; if '1', the user will be asked,</span>
0023 <span class="comment">%                   if a still existing set (with identical name) should be</span>
0024 <span class="comment">%                   overwritten</span>
0025 <span class="comment">%</span>
0026 <span class="comment">% OUTPUT:   (1) -- Boolean; '1' for being successful</span>
0027 <span class="comment">%           (2) -- Char array with error message in case of fail; if saving</span>
0028 <span class="comment">%                   was sucessfull, the array is empty</span>
0029 <span class="comment">%</span>
0030 <span class="comment">% Author: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)</span>
0031 <span class="comment">% Project: MTIDS (http://code.google.com/p/mtids/)</span>
0032 
0033 handle4InputSpecsVars           = varargin{1}; <span class="comment">% handles.TextField1InputSpecs</span>
0034 handle4InputSpecsNoOfIntInputs  = varargin{2}; <span class="comment">% handles.TextField2InputSpecs</span>
0035 templName                       = varargin{3}; <span class="comment">% answer{1}</span>
0036 handle4SetName                  = varargin{4}; <span class="comment">% handles.EditFieldSetName</span>
0037 Data                            = varargin{5}; <span class="comment">%#ok&lt;*NASGU&gt;</span>
0038 dimension                       = varargin{6};
0039 pathname                        = varargin{7};
0040 <span class="keyword">if</span> <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( varargin,2 ) &gt; 7
0041     handle4IsActive             = varargin{8};
0042     isActive = get(handle4IsActive,<span class="string">'Value'</span>);
0043 <span class="keyword">else</span>
0044     isActive = 1;
0045 <span class="keyword">end</span>
0046     
0047 <span class="keyword">if</span> <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( varargin,2 ) &gt; 8
0048     overwriteEnable = varargin{9};
0049 <span class="keyword">else</span>
0050     overwriteEnable = 1;
0051 <span class="keyword">end</span>
0052 
0053 flagEqual = 0;
0054 flagExists = 0;
0055 answer = <span class="string">'No'</span>;
0056 varargout{1} = 0;
0057 varargout{2} = <span class="string">''</span>;
0058 <span class="comment">% Prepare storing of input specifications</span>
0059 inputSpec.Vars =regexp( get(handle4InputSpecsVars,<span class="string">'String'</span>),<span class="string">',\s|,|\s'</span>,<span class="string">'split'</span>);
0060 inputSpec.noOfIntInputs = str2double(get(handle4InputSpecsNoOfIntInputs,<span class="string">'string'</span>));
0061 <span class="comment">% check if name was prompted</span>
0062 tempString = get(handle4SetName,<span class="string">'String'</span>);
0063 <span class="keyword">if</span> isempty(tempString)
0064     varargout{1} = 0;
0065     varargout{2} = <span class="string">'No name for parameter set prompted'</span>;
0066     <span class="keyword">return</span>
0067 <span class="keyword">end</span>
0068 <span class="keyword">if</span> exist([templName <span class="string">'_paramValues.mat'</span>],<span class="string">'file'</span>)
0069     <a href="../../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>([templName <span class="string">'_paramValues.mat'</span>]);
0070     <span class="comment">% check if the paramSet still exists</span>
0071     eval([<span class="string">'idx = length( '</span> templName <span class="string">'_paramValues);'</span>]);
0072     tmpStruct.set = Data;
0073     tmpStruct.dimension = dimension;
0074     tmpStruct.inputSpec = inputSpec;
0075     tmpStruct.setName = tempString;
0076     tmpStruct.isActive = isActive; <span class="comment">%#ok&lt;STRNU&gt;</span>
0077     <span class="keyword">for</span> ii = 1:idx
0078         cmd2 = [<span class="string">'flagEqual = isequal(tmpStruct,'</span> templName <span class="keyword">...</span>
0079             <span class="string">'_paramValues('</span> num2str(ii) <span class="string">'));'</span>];
0080         eval( cmd2 );
0081         <span class="keyword">if</span> flagEqual == 1
0082             varargout{2} = <span class="string">'A parameter set with identical values still exists'</span>;
0083             <span class="keyword">break</span>
0084         <span class="keyword">end</span>
0085     <span class="keyword">end</span>
0086     <span class="keyword">if</span> flagEqual == 0
0087         <span class="comment">% check if set-name was used before</span>
0088 <span class="comment">%         tempString = get(handle4SetName,'String');</span>
0089         <span class="keyword">for</span> kk = 1:idx
0090             eval([<span class="string">'tmp = '</span> templName <span class="string">'_paramValues('</span> num2str(kk) <span class="string">').setName;'</span>]);
0091             <span class="keyword">if</span> strcmp( tempString,tmp )
0092                 flagExists = 1;
0093                 idxExists = kk;
0094             <span class="keyword">end</span>
0095         <span class="keyword">end</span>
0096         <span class="keyword">if</span> ~flagExists
0097             <span class="comment">% saving new field to existing struct</span>
0098             cmd1 = [templName <span class="string">'_paramValues('</span> num2str(idx+1) <span class="string">').set = '</span><span class="keyword">...</span>
0099                 <span class="string">'Data;'</span>];
0100             cmd3 = [templName <span class="string">'_paramValues('</span> num2str(idx+1) <span class="string">').dimension = '</span><span class="keyword">...</span>
0101                 <span class="string">'dimension;'</span>];
0102             cmd4 = [templName <span class="string">'_paramValues('</span> num2str(idx+1) <span class="string">').inputSpec = '</span><span class="keyword">...</span>
0103                 <span class="string">'inputSpec;'</span>];
0104             cmd5 = [templName <span class="string">'_paramValues('</span> num2str(idx+1) <span class="string">').setName = '''</span><span class="keyword">...</span>
0105                 tempString <span class="string">''';'</span>];
0106             cmd6 = [templName <span class="string">'_paramValues('</span> num2str(idx+1) <span class="string">').isActive = '</span><span class="keyword">...</span>
0107                num2str(isActive) <span class="string">';'</span>];
0108             eval( cmd1 );
0109             eval( cmd3 );
0110             eval( cmd4 );
0111             eval( cmd5 );
0112             eval( cmd6 );
0113             overwriteEnable = 0;
0114         <span class="keyword">else</span>
0115             <span class="keyword">if</span> overwriteEnable
0116                 <span class="comment">% saving to existing struct</span>
0117                 answer = questdlg(<span class="string">'Overwrite existing parameter set?'</span>,<span class="keyword">...</span>
0118                     <span class="string">'Overwriting request'</span>);
0119                 <span class="keyword">if</span> strcmp(answer,<span class="string">'Yes'</span>)
0120                     cmd1 = [templName <span class="string">'_paramValues('</span> num2str(idxExists) <span class="string">').set = '</span><span class="keyword">...</span>
0121                         <span class="string">'Data;'</span>];
0122                     cmd3 = [templName <span class="string">'_paramValues('</span> num2str(idxExists) <span class="string">').dimension = '</span><span class="keyword">...</span>
0123                         <span class="string">'dimension;'</span>];
0124                     cmd4 = [templName <span class="string">'_paramValues('</span> num2str(idxExists) <span class="string">').inputSpec = '</span><span class="keyword">...</span>
0125                         <span class="string">'inputSpec;'</span>];
0126                     cmd5 = [templName <span class="string">'_paramValues('</span> num2str(idxExists) <span class="string">').setName = '''</span><span class="keyword">...</span>
0127                         tempString <span class="string">''';'</span>];
0128                     cmd6 = [templName <span class="string">'_paramValues('</span> num2str(idxExists) <span class="string">').isActive = '</span><span class="keyword">...</span>
0129                         num2str(isActive) <span class="string">';'</span>];
0130                     eval( cmd1 );
0131                     eval( cmd3 );
0132                     eval( cmd4 );
0133                     eval( cmd5 );
0134                     eval( cmd6 );
0135                     disp(<span class="string">'Overwriting...'</span>);
0136                 <span class="keyword">else</span>
0137                     varargout{2} = <span class="string">'Parameter set exists and wasn''t overwritten'</span>;
0138                 <span class="keyword">end</span>
0139             <span class="keyword">else</span>
0140                 varargout{2} = <span class="string">'Name for parameter set still exists'</span>;                
0141                 <span class="keyword">return</span>
0142             <span class="keyword">end</span>
0143         <span class="keyword">end</span>
0144     <span class="keyword">end</span> <span class="comment">% if flagEqual == 0</span>
0145 <span class="keyword">else</span>
0146     eval([templName <span class="string">'_paramValues.set = Data;'</span>]);
0147     eval([templName <span class="string">'_paramValues.dimension = dimension;'</span>]);
0148     eval([templName <span class="string">'_paramValues.inputSpec = inputSpec;'</span>]);
0149     eval([templName <span class="string">'_paramValues.isActive = isActive;'</span>]);
0150 <span class="comment">%     tempString = 'Value Set 1';</span>
0151     eval([templName <span class="string">'_paramValues.setName = '</span> char(39) tempString char(39) <span class="string">';'</span>]);
0152 <span class="keyword">end</span>
0153 <span class="keyword">if</span> (flagEqual == 0 &amp;&amp; ~overwriteEnable) || (overwriteEnable &amp;&amp; strcmp( answer,<span class="string">'Yes'</span>))
0154     <a href="../../mtids/subfunctions/matgraph/@graph/save.html" class="code" title="function save(g,filename)">save</a>([pathname templName <span class="string">'_paramValues'</span>],[templName <span class="string">'_paramValues'</span>]);
0155     disp([<span class="string">'Parameter set '''</span> tempString <span class="string">''' saved for template '''</span> templName <span class="string">''''</span>]);
0156     varargout{1} = 1;
0157 <span class="keyword">end</span>
0158 
0159 <span class="comment">%%%%%%%%%</span></pre></div>
<hr><address>Generated on Mon 01-Oct-2012 17:13:50 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>