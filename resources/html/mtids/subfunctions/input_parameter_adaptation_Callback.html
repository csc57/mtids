<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of input_parameter_adaptation_Callback</title>
  <meta name="keywords" content="input_parameter_adaptation_Callback">
  <meta name="description" content="INPUT_PARAMETER_ADAPTATION_CALLBACK automatic correction of numerical parameters">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">mtids</a> &gt; <a href="index.html">subfunctions</a> &gt; input_parameter_adaptation_Callback.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mtids\subfunctions&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>input_parameter_adaptation_Callback
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>INPUT_PARAMETER_ADAPTATION_CALLBACK automatic correction of numerical parameters</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function input_parameter_adaptation_Callback(hObject, eventdata, handles) %#ok<INUSL> </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">INPUT_PARAMETER_ADAPTATION_CALLBACK automatic correction of numerical parameters

 INPUT: hObject    -- handle to input_parameter_adaptation (see GCBO)
        eventdata  -- reserved - to be defined in a future version of MATLAB
        handles    -- structure with handles and user data (see GUIDATA)

 OUTPUT: (none)    -- Correct parameters are written directly into
                       affected template value sets

 Author: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)
 Project: MTIDS (http://code.google.com/p/mtids/)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="../../mtids/subfunctions/figures/inputParamsAdaptation.html" class="code" title="function varargout = inputParamsAdaptation(varargin)">inputParamsAdaptation</a>	INPUTPARAMSADAPTATION gui to choose how input parameters should corrected</li><li><a href="../../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>	nv(g) --- number of vertices in g</li><li><a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>	size(g) --- returns [nv,ne] for the graph</li><li><a href="../../mtids/subfunctions/matgraph/@partition/check.html" class="code" title="function yn = check(p)">check</a>	check(p) --- check that the datastructure holding p is a valid partition</li><li><a href="../../mtids/subfunctions/matgraph/@partition/nv.html" class="code" title="function n = nv(p)">nv</a>	nv(p) --- number of vertices (elements) of a partition</li><li><a href="../../mtids/subfunctions/matgraph/@partition/size.html" class="code" title="function s = size(p)">size</a>	size(p) --- returns [nv,np]: number of vertices, parts.</li><li><a href="systemConsistencyTest.html" class="code" title="function varargout = systemConsistencyTest( handles,varargin )">systemConsistencyTest</a>	SYSTEMCONSISTENCYTEST compares input signal with input depending parameters</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function input_parameter_adaptation_Callback(hObject, eventdata, handles) </a><span class="comment">%#ok&lt;INUSL&gt;</span>
0002 <span class="comment">%INPUT_PARAMETER_ADAPTATION_CALLBACK automatic correction of numerical parameters</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% INPUT: hObject    -- handle to input_parameter_adaptation (see GCBO)</span>
0005 <span class="comment">%        eventdata  -- reserved - to be defined in a future version of MATLAB</span>
0006 <span class="comment">%        handles    -- structure with handles and user data (see GUIDATA)</span>
0007 <span class="comment">%</span>
0008 <span class="comment">% OUTPUT: (none)    -- Correct parameters are written directly into</span>
0009 <span class="comment">%                       affected template value sets</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% Author: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)</span>
0012 <span class="comment">% Project: MTIDS (http://code.google.com/p/mtids/)</span>
0013 
0014 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0015 
0016 <span class="comment">% get node which don't have consistent input depending parameters</span>
0017 [isCorrect consistentNodes] = <a href="systemConsistencyTest.html" class="code" title="function varargout = systemConsistencyTest( handles,varargin )">systemConsistencyTest</a>( handles,0 ); <span class="comment">%#ok&lt;ASGLU&gt;</span>
0018 badNodes = ~consistentNodes;
0019 
0020 <span class="comment">% ask for adaptation method</span>
0021 [mode <a href="../../mtids/subfunctions/matgraph/@partition/check.html" class="code" title="function yn = check(p)">check</a>] = <a href="../../mtids/subfunctions/figures/inputParamsAdaptation.html" class="code" title="function varargout = inputParamsAdaptation(varargin)">inputParamsAdaptation</a>;
0022 <span class="keyword">if</span> ~<a href="../../mtids/subfunctions/matgraph/@partition/check.html" class="code" title="function yn = check(p)">check</a>
0023     <span class="keyword">return</span>
0024 <span class="keyword">end</span>
0025 <span class="keyword">for</span> ii = 1:<a href="../../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(data.g)
0026     <span class="keyword">if</span> badNodes(ii)
0027         vars = data.templates{ii,2}.inputSpec.Vars;
0028         tempSet = data.templates{ii,2}.set;
0029         nodeInputs = data.templates{ii,2}.nodeInputs;
0030         <span class="keyword">for</span> kk = 1:length(vars)
0031             [tempRow tempCol] = find( strcmp(tempSet,vars{kk}) );
0032             <span class="keyword">if</span> length(tempRow) &gt; 1 || length(tempCol) &gt; 1
0033                 <span class="comment">% error</span>
0034                 <span class="keyword">return</span>
0035             <span class="keyword">end</span>
0036             valOld = str2num( tempSet{ tempRow,tempCol+1 } ); <span class="comment">%#ok&lt;ST2NM&gt;</span>
0037             <span class="keyword">switch</span> mode
0038                 <span class="keyword">case</span> <span class="string">'ones'</span>;
0039                     valNew = ones( <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valOld,1),nodeInputs );
0040                 <span class="keyword">case</span> <span class="string">'meanNodes'</span>;
0041                     valNew = ones( <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valOld,1),nodeInputs )/nodeInputs;
0042                 <span class="keyword">case</span> <span class="string">'meanValues'</span>;
0043                     valNew = ones( <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valOld,1),nodeInputs )*mean(valOld,2);
0044                 <span class="keyword">case</span> <span class="string">'random'</span>;
0045                     valNew = randn( <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valOld,1),nodeInputs );
0046                 <span class="keyword">case</span> <span class="string">'preserve'</span>;
0047                     <span class="keyword">if</span> <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( valOld,2 ) &lt; nodeInputs
0048                         valNew = [valOld ones(<a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valOld,1),nodeInputs-<a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valOld,2))];
0049                     <span class="keyword">elseif</span> <a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( valOld,2 ) &gt; nodeInputs
0050                         valNew = valOld(:,1:nodeInputs);
0051                     <span class="keyword">end</span>
0052             <span class="keyword">end</span>
0053             <span class="comment">% wrap 'valNew' into correct format for writing the values into</span>
0054             <span class="comment">% simulink blocks</span>
0055             str = <span class="string">'['</span>;
0056             <span class="keyword">for</span> jj = 1:<a href="../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(valNew,1) <span class="comment">% for each line of 'valNew'</span>
0057                 str = [str num2str(valNew(jj,:)) <span class="string">';'</span>]; <span class="comment">%#ok&lt;AGROW&gt;</span>
0058             <span class="keyword">end</span>
0059             str(end) = <span class="string">']'</span>;
0060             data.templates{ii,2}.set{tempRow,tempCol+1} = str;
0061         <span class="keyword">end</span>
0062     <span class="keyword">end</span>
0063 <span class="keyword">end</span>
0064 setappdata(handles.figure1,<span class="string">'appData'</span>,data);</pre></div>
<hr><address>Generated on Mon 01-Oct-2012 17:13:50 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>