<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of readImportedTemplates</title>
  <meta name="keywords" content="readImportedTemplates">
  <meta name="description" content="READIMPORTEDTEMPLATES reads Simulink templates out of folder">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="../../index.html">mtids</a> &gt; <a href="../index.html">subfunctions</a> &gt; <a href="index.html">mtids_main</a> &gt; readImportedTemplates.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mtids\subfunctions\mtids_main&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>readImportedTemplates
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>READIMPORTEDTEMPLATES reads Simulink templates out of folder</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function varargout = readImportedTemplates( varargin ) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">READIMPORTEDTEMPLATES reads Simulink templates out of folder

 This function checks the import/template folder, if there are
 templates, which were formerly imported (with paramValue sets)
 This function is at least invoked by the initialization of MTIDS
 template_list = [Type color1 color2 param_values active]

 INPUT:    (1) -- template_list_old: in mtids, this variable is the
                   initialized or stored template list.

 OUTPUT:   (1) -- Either: template_list_new, where all old and new templates
                   are contained
                  Or: if no input argument is given, then just the names of
                   the templates and the value sets are defined as an ouput
                   (as a struct-variable)

 Author: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)
 Project: MTIDS (http://code.google.com/p/mtids/)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>	load(g,filename) --- read a saved graph on disk</li><li><a href="../../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>	size(g) --- returns [nv,ne] for the graph</li><li><a href="../../../mtids/subfunctions/matgraph/@partition/size.html" class="code" title="function s = size(p)">size</a>	size(p) --- returns [nv,np]: number of vertices, parts.</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../../mtids/mtids.html" class="code" title="function varargout = mtids(varargin)">mtids</a>	MTIDS Version 1.2</li><li><a href="../../../mtids/subfunctions/figures/manageParamSets.html" class="code" title="function varargout = manageParamSets(varargin)">manageParamSets</a>	MANAGEPARAMSETS gui for managing templates and its numerical parameter sets</li></ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = readImportedTemplates( varargin )</a>
0002 <span class="comment">%READIMPORTEDTEMPLATES reads Simulink templates out of folder</span>
0003 <span class="comment">%</span>
0004 <span class="comment">% This function checks the import/template folder, if there are</span>
0005 <span class="comment">% templates, which were formerly imported (with paramValue sets)</span>
0006 <span class="comment">% This function is at least invoked by the initialization of MTIDS</span>
0007 <span class="comment">% template_list = [Type color1 color2 param_values active]</span>
0008 <span class="comment">%</span>
0009 <span class="comment">% INPUT:    (1) -- template_list_old: in mtids, this variable is the</span>
0010 <span class="comment">%                   initialized or stored template list.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">% OUTPUT:   (1) -- Either: template_list_new, where all old and new templates</span>
0013 <span class="comment">%                   are contained</span>
0014 <span class="comment">%                  Or: if no input argument is given, then just the names of</span>
0015 <span class="comment">%                   the templates and the value sets are defined as an ouput</span>
0016 <span class="comment">%                   (as a struct-variable)</span>
0017 <span class="comment">%</span>
0018 <span class="comment">% Author: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)</span>
0019 <span class="comment">% Project: MTIDS (http://code.google.com/p/mtids/)</span>
0020 
0021 <span class="keyword">if</span> <a href="../../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( varargin,2) == 1
0022     template_list_old = varargin{1};
0023 <span class="keyword">end</span>
0024 
0025 <span class="comment">% get Filelist of folder</span>
0026 path1 = [pwd filesep <span class="string">'templates'</span> filesep <span class="string">'import'</span> ];
0027 filelist = dir( path1 );
0028 
0029 <span class="comment">% examine each .mdl-File if it contains 'CHECKED' in its name</span>
0030 templateNames = cell( length(filelist),1 );
0031 <span class="keyword">for</span> ii = 1:length(filelist)
0032     <span class="comment">% only checked mdl's are interesting at the moment</span>
0033     idxTemp = regexp( filelist(ii).name,<span class="string">'_CHECKED.mdl'</span>);
0034     <span class="keyword">if</span> ~isempty( idxTemp )      
0035         nameTemp = filelist(ii).name;        
0036         templateNames{ii} = nameTemp(1:idxTemp-1);
0037     <span class="keyword">end</span>    
0038 <span class="keyword">end</span>
0039 templateNames = templateNames( ~cellfun(@isempty,templateNames) );
0040 
0041 <span class="comment">% for found checked templates, look for the paramValue sets</span>
0042 <span class="comment">% paramValueSets = cell( length(templateNames),1 );</span>
0043 <span class="keyword">for</span> ii = 1:length( templateNames )
0044     <span class="keyword">if</span> exist( [ path1 filesep templateNames{ii} <span class="string">'_paramValues.mat'</span>],<span class="string">'file'</span>)
0045         <a href="../../../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>([path1 filesep templateNames{ii} <span class="string">'_paramValues'</span>]);
0046         cmd1 = [<span class="string">'paramValueSets('</span> num2str(ii) <span class="keyword">...</span>
0047             <span class="string">').sets(:) = '</span> templateNames{ii} <span class="string">'_paramValues(:);'</span>];
0048         eval( cmd1 );
0049         cmd2 = [<span class="string">'paramValueSets('</span> num2str(ii) <span class="keyword">...</span>
0050             <span class="string">').name = '''</span> templateNames{ii} <span class="string">''';'</span>];
0051         eval( cmd2 );
0052     <span class="keyword">end</span>   
0053 <span class="keyword">end</span>
0054 
0055 isEmptyVec = zeros( length(paramValueSets),1 ); <span class="comment">%#ok&lt;NODEF&gt;</span>
0056 <span class="keyword">for</span> ii = 1:length(paramValueSets)
0057     isEmptyVec(ii) = isempty(paramValueSets(ii).name);
0058 <span class="keyword">end</span>
0059 paramValueSets = paramValueSets( ~isEmptyVec );
0060 
0061 <span class="comment">% prepare template-list in MTIDS-GUI</span>
0062 <span class="keyword">if</span> exist( <span class="string">'template_list_old'</span>, <span class="string">'var'</span> )
0063     template_list = cell( <a href="../../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( paramValueSets,2 ),5);
0064     <span class="keyword">for</span> ii = 1:<a href="../../../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>( paramValueSets,2 )
0065         template_list{ii,1} = paramValueSets(ii).name;
0066         <span class="comment">% Check if template still existed before, because then we must use the</span>
0067         <span class="comment">% stored color(s)</span>
0068         idxTemplExists = ~cellfun( @isempty, <span class="keyword">...</span>
0069             regexp( template_list_old(:,1), template_list{ii,1} ) );
0070         <span class="keyword">if</span> any( idxTemplExists )
0071             template_list{ii,2} = template_list_old{idxTemplExists,2};
0072             template_list{ii,3} = template_list_old{idxTemplExists,3};
0073         <span class="keyword">else</span>
0074             template_list{ii,2} = [245 245 245]/255;
0075             template_list{ii,3} = [0 0 0];
0076         <span class="keyword">end</span>
0077         template_list{ii,4} = paramValueSets(ii).sets;
0078         <span class="comment">% isActive-flag for template itself</span>
0079         template_list{ii,5} = 1;
0080         varargout{1} = template_list;
0081     <span class="keyword">end</span>
0082 <span class="keyword">else</span>
0083     varargout{1} = paramValueSets;
0084 <span class="keyword">end</span>
0085 
0086 
0087 
0088 
0089 <span class="comment">%%%%%%%%%%%%%%</span></pre></div>
<hr><address>Generated on Mon 01-Oct-2012 17:13:50 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>