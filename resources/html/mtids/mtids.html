<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of mtids</title>
  <meta name="keywords" content="mtids">
  <meta name="description" content="MTIDS Version 1.2">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mtids</a> &gt; mtids.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mtids&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>mtids
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>MTIDS Version 1.2</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function varargout = mtids(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">MTIDS Version 1.2
      (C) 2011 The MTIDS Project (http://code.google.com/p/mtids)
      Matlab Toolbox for Interconnected Dynamical Systems
      Test Rig for Large-Scale Interconnected Systems.

      MTIDS uses and redistributes Matgraph (C) 2005 Ed Scheinermann (http://www.ams.jhu.edu/~ers/matgraph/)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>	COMPUTEINPUTSIZES Computes signal sizes of nodes inputs</li><li><a href="../mtids/subfunctions/compute_SCC.html" class="code" title="function SCC_sets = compute_SCC( graph1 )">compute_SCC</a>	COMPUTE_SCC Computes strong connected components of a digraph</li><li><a href="../mtids/subfunctions/compute_WCC.html" class="code" title="function WCC_sets = compute_WCC( graphINPUT )">compute_WCC</a>	COMPUTE_WCC Computes weak connected components of a digraph</li><li><a href="../mtids/subfunctions/figures/about_mtids.html" class="code" title="function varargout = about_mtids(varargin)">about_mtids</a>	ABOUT_MTIDS M-file for about_mtids.fig</li><li><a href="../mtids/subfunctions/figures/editSimParams.html" class="code" title="function varargout = editSimParams(varargin)">editSimParams</a>	EDITSIMPARAMS gui for asking basic Simulink simulation parameters</li><li><a href="../mtids/subfunctions/figures/edit_node.html" class="code" title="function varargout = edit_node(varargin)">edit_node</a>	EDIT_NODE gui to edit settings of a specific node in a MTIDS graph</li><li><a href="../mtids/subfunctions/figures/export_as_matrix.html" class="code" title="function varargout = export_as_matrix(varargin)">export_as_matrix</a>	EXPORT_AS_MATRIX gui to export a graph in mtids as a matrix</li><li><a href="../mtids/subfunctions/figures/import_dynamic_params.html" class="code" title="function varargout = import_dynamic_params(varargin)">import_dynamic_params</a>	IMPORT_DYNAMIC_PARAMS gui for importing tempates to MTIDS</li><li><a href="../mtids/subfunctions/figures/manageParamSets.html" class="code" title="function varargout = manageParamSets(varargin)">manageParamSets</a>	MANAGEPARAMSETS gui for managing templates and its numerical parameter sets</li><li><a href="../mtids/subfunctions/figures/setnodecolor.html" class="code" title="function varargout = setnodecolor(varargin)">setnodecolor</a>	SETNODECOLOR gui to set the appearance of the nodes in MTIDS</li><li><a href="../mtids/subfunctions/getDegree.html" class="code" title="function [inDegree,outDegree] = getDegree(matrix)">getDegree</a>	GETDEGREE Computes in- and outdegree of a node in a digraph</li><li><a href="../mtids/subfunctions/initPlotParams.html" class="code" title="function argout = initPlotParams( dim )">initPlotParams</a>	INITPLOTPARAMS initially set the parameters needed for plots</li><li><a href="../mtids/subfunctions/interface2Simulink/any_matrix_to_elist.html" class="code" title="function elist = any_matrix_to_elist(M,dir)">any_matrix_to_elist</a>	ANY_MATRIX_TO_ELIST Reshapes an adjacency matrix into an edge list</li><li><a href="../mtids/subfunctions/interface2Simulink/exportLayer.html" class="code" title="function[] =exportLayer(name,template,templateList,A, xy, labs)">exportLayer</a>	exportLayer.m</li><li><a href="../mtids/subfunctions/interface2Simulink/exportLayer2.html" class="code" title="function[] =exportLayer2(name,template,templateList,A, xy, labs)">exportLayer2</a>	exportLayer.m</li><li><a href="../mtids/subfunctions/interface2Simulink/exportSimulink.html" class="code" title="function[] =exportSimulink(name,template,templateList,A, xy, labs)">exportSimulink</a>	exportSimulink.m</li><li><a href="../mtids/subfunctions/interface2Simulink/exportSimulink2.html" class="code" title="function varargout = exportSimulink2( varargin )">exportSimulink2</a>	EXPORTSIMULINK2 creates Simulink system out of MTIDS graph</li><li><a href="../mtids/subfunctions/interface2Simulink/importSimulink.html" class="code" title="function[A, nverts, nedges, xy, labs ] = importSimulink(model)">importSimulink</a>	importSimulink.m :</li><li><a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>	add --- add edge(s) to the graph</li><li><a href="../mtids/subfunctions/matgraph/@graph/clear_edges.html" class="code" title="function clear_edges(g)">clear_edges</a>	clear_edges(g) --- delete all edges of g</li><li><a href="../mtids/subfunctions/matgraph/@graph/complete.html" class="code" title="function complete(g,a,b)">complete</a>	complete: build complete and complete multipartite graphs</li><li><a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>	delete --- delete vertices or edges from a graph</li><li><a href="../mtids/subfunctions/matgraph/@graph/draw.html" class="code" title="function draw(g,dir,line_style,nodeFillColor,nodeEdgeColor)">draw</a>	draw(g) --- draw g in a figure window</li><li><a href="../mtids/subfunctions/matgraph/@graph/edges.html" class="code" title="function [elist] = edges(g,dir)">edges</a>	edges(g) --- list the edges in g as a 2-column matrix</li><li><a href="../mtids/subfunctions/matgraph/@graph/eig.html" class="code" title="function v = eig(g)">eig</a>	eig(g) -- compute the eigenvalues of this graph</li><li><a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>	embed --- create an embedding for a graph</li><li><a href="../mtids/subfunctions/matgraph/@graph/free.html" class="code" title="function free(g)">free</a>	free(g) --- free the graph from the system</li><li><a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>	get_label(g) or get_label(g,v) --- get vertex label(s)</li><li><a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>	getxy(g) --- give g's embedding (or [] if g doesn't have one)</li><li><a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>	graph: constructor for the graph class</li><li><a href="../mtids/subfunctions/matgraph/@graph/has.html" class="code" title="function yn = has(g,u,v,dir)">has</a>	has --- check if the graph has a particular vertex or edge</li><li><a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>	Assign labels to vertices of g</li><li><a href="../mtids/subfunctions/matgraph/@graph/laplacian.html" class="code" title="function m = laplacian(g,s)">laplacian</a>	laplacian(g) --- get the Laplacian matrix of g</li><li><a href="../mtids/subfunctions/matgraph/@graph/ldraw.html" class="code" title="function ldraw(g,dir,line_style,nodeFillColor,nodeEdgeColor)">ldraw</a>	ldraw(g,dir) -- draw a graph with vertices marked with their labels</li><li><a href="../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>	load(g,filename) --- read a saved graph on disk</li><li><a href="../mtids/subfunctions/matgraph/@graph/matrix.html" class="code" title="function A = matrix(g)">matrix</a>	matrix(g) --- return (a copy of) the adjacency matrix of g</li><li><a href="../mtids/subfunctions/matgraph/@graph/matrixOfGraph.html" class="code" title="function A = matrixOfGraph(g)">matrixOfGraph</a>	matrix(g) --- return (a copy of) the adjacency matrix of g</li><li><a href="../mtids/subfunctions/matgraph/@graph/ndraw.html" class="code" title="function ndraw(g,dir,line_style,nodeFillColor,nodeEdgeColor)">ndraw</a>	ndraw(g) --- draw g in a figure window with numbered vertices</li><li><a href="../mtids/subfunctions/matgraph/@graph/ne.html" class="code" title="function m = ne(g,dir,h)">ne</a>	ne(g) --- number of edges in g</li><li><a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>	nv(g) --- number of vertices in g</li><li><a href="../mtids/subfunctions/matgraph/@graph/old-versions/draw.html" class="code" title="function draw(g,line_style)">draw</a>	draw(g) --- draw g in a figure window</li><li><a href="../mtids/subfunctions/matgraph/@graph/path.html" class="code" title="function path(g,n)">path</a>	path(g,n) --- make g a path on n vertices</li><li><a href="../mtids/subfunctions/matgraph/@graph/random.html" class="code" title="function random(g,arg1,arg2)">random</a>	random --- overwrite g with a random graph</li><li><a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>	resize(g,n) --- change the number of vertices in g to n</li><li><a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>	rmxy(g) --- erase g's embedding</li><li><a href="../mtids/subfunctions/matgraph/@graph/save.html" class="code" title="function save(g,filename)">save</a>	save(g,filename) --- save a graph to disk</li><li><a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>	size(g) --- returns [nv,ne] for the graph</li><li><a href="../mtids/subfunctions/matgraph/@graph/trim.html" class="code" title="function trim(g,d)">trim</a>	trim(g,d) --- iteratively remove vertices of degree at most d</li><li><a href="../mtids/subfunctions/matgraph/@partition/check.html" class="code" title="function yn = check(p)">check</a>	check(p) --- check that the datastructure holding p is a valid partition</li><li><a href="../mtids/subfunctions/matgraph/@partition/ne.html" class="code" title="function yn = ne(p,q)">ne</a>	ne(p,q) --- p ~= q checks if p and q are different</li><li><a href="../mtids/subfunctions/matgraph/@partition/nv.html" class="code" title="function n = nv(p)">nv</a>	nv(p) --- number of vertices (elements) of a partition</li><li><a href="../mtids/subfunctions/matgraph/@partition/size.html" class="code" title="function s = size(p)">size</a>	size(p) --- returns [nv,np]: number of vertices, parts.</li><li><a href="../mtids/subfunctions/matgraph/@permutation/ne.html" class="code" title="function tf = ne(p,q)">ne</a>	test if p ~= q</li><li><a href="../mtids/subfunctions/matgraph/graph_destroy.html" class="code" title="function graph_destroy">graph_destroy</a>	destroy the GRAPH_MAGIC system</li><li><a href="../mtids/subfunctions/matgraph/graph_init.html" class="code" title="function graph_init(capacity)">graph_init</a>	graph_init(capacity) --- used to initialize the GRAPH_MAGIC data</li><li><a href="../mtids/subfunctions/mtids_main/readImportedTemplates.html" class="code" title="function varargout = readImportedTemplates( varargin )">readImportedTemplates</a>	READIMPORTEDTEMPLATES reads Simulink templates out of folder</li><li><a href="../mtids/subfunctions/performSimulation.html" class="code" title="function varargout = performSimulation( varargin )">performSimulation</a>	PERFORMSIMULATION Simulates the MTIDS system in Simulink</li><li><a href="../mtids/subfunctions/systemConsistencyTest.html" class="code" title="function varargout = systemConsistencyTest( handles,varargin )">systemConsistencyTest</a>	SYSTEMCONSISTENCYTEST compares input signal with input depending parameters</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function mtids_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = mtids_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function newnodelabel_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function newnode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function addconnection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function fromnode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function tonode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function randomconnection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function removeconnection_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function remnode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function removenode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function trimgraph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function clearconnections_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function completegraph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function randomgraph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function listbox1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function Newgraph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function loadgraph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function savegraphas_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function aboutmtids_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function labelview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function colorview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function numberview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function blankview_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function export_as_layer_2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function refresh_graph(reset, eventdata, handles,hObject)</a></li><li><a href="#_sub28" class="code">function basic_stats(eventdata, handles)</a></li><li><a href="#_sub29" class="code">function dynamic_label_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function import_from_simulink_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function export_to_simulink_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function add_multiple_nodes_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function exit_to_matlab_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function number_of_nodes_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function label_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function number_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function export_to_workplace_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function import_from_workplace_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function add_mdl_template_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function selector_dynamic_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function selector_dynamic_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function selector_valueSet_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function refresh_dynamics(eventdata, handles)</a></li><li><a href="#_sub44" class="code">function refresh_valueSet(handles)</a></li><li><a href="#_sub45" class="code">function circular_graph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function figure1_WindowButtonDownFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function figure1_WindowButtonUpFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function figure1_WindowButtonMotionFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function export_as_layer_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function update_graph_button_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub51" class="code">function export_to_simulink2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub52" class="code">function uipanel9_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub53" class="code">function run_simulation_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub54" class="code">function plotAllOutput_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function run_simulation_plots_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function pushbutton17_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function showSimMod_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function load_settings(filename,handles)</a></li><li><a href="#_sub59" class="code">function save_settings(filename,handles)</a></li><li><a href="#_sub60" class="code">function loadGraphAtOpening(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function set_node_color_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function create_dynamic_Template_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function template_import_wizard_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function saveGraph(hObject, eventdata, handles, pathname, filename)</a></li><li><a href="#_sub65" class="code">function menu_manageParamSets_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function get_simParams_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function radiobutton7_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function tonode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function fromnode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function Untitled_10_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function file_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function Untitled_9_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function Untitled_11_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function generatesimulinkmdl_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function Untitled_12_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function listbox1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function about_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function adddynamics_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function dynamicsimporter_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function checkbox2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function figure1_KeyPressFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function Savegraph_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function Untitled_17_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function viewmenu_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function editnode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function Untitled_13_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function Untitled_14_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function click_add_node_long_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function remnode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function dynamic_label_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub92" class="code">function number_of_nodes_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub93" class="code">function selector_valueSet_Callback(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = mtids(varargin)</a>
0002 <span class="comment">%MTIDS Version 1.2</span>
0003 <span class="comment">%      (C) 2011 The MTIDS Project (http://code.google.com/p/mtids)</span>
0004 <span class="comment">%      Matlab Toolbox for Interconnected Dynamical Systems</span>
0005 <span class="comment">%      Test Rig for Large-Scale Interconnected Systems.</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%      MTIDS uses and redistributes Matgraph (C) 2005 Ed Scheinermann (http://www.ams.jhu.edu/~ers/matgraph/)</span>
0008 
0009 <span class="comment">%      This program is free software; you can redistribute it and/or</span>
0010 <span class="comment">%      modify it under the terms of the GNU General Public License</span>
0011 <span class="comment">%      as published by the Free Software Foundation; either version 2</span>
0012 <span class="comment">%      of the License, or (at your option) any later version.</span>
0013 <span class="comment">%</span>
0014 <span class="comment">%      This program is distributed in the hope that it will be useful,</span>
0015 <span class="comment">%      but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
0016 <span class="comment">%      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
0017 <span class="comment">%      GNU General Public License for more details.</span>
0018 <span class="comment">%</span>
0019 <span class="comment">%      You should have received a copy of the GNU General Public License</span>
0020 <span class="comment">%      along with this program; if not, write to the Free Software</span>
0021 <span class="comment">%      Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.</span>
0022 <span class="comment">%</span>
0023 <span class="comment">%       A copy of the GNU GPL v2 Licence is available inside the LICENCE.txt</span>
0024 <span class="comment">%       file.</span>
0025 <span class="comment">%</span>
0026 <span class="comment">% Last Modified by GUIDE v2.5 26-Sep-2012 15:38:36</span>
0027 
0028 <span class="comment">% Authors: Francisco Llobet, Jose Rivera</span>
0029 <span class="comment">% Editor: Ferdinand Trommsdorff (f.trommsdorff@gmail.com)</span>
0030 <span class="comment">% Project: MTIDS (http://code.google.com/p/mtids/)</span>
0031 
0032 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0033 gui_Singleton = 1;
0034 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0035                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0036                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction mtids_OpeningFcn(hObject, eventdata, handles, varargin)">mtids_OpeningFcn</a>, <span class="keyword">...</span>
0037                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = mtids_OutputFcn(hObject, eventdata, handles)">mtids_OutputFcn</a>, <span class="keyword">...</span>
0038                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0039                    <span class="string">'gui_Callback'</span>,   []);
0040 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0041     gui_State.gui_Callback = str2func(varargin{1});
0042 <span class="keyword">end</span>
0043 
0044 <span class="keyword">if</span> nargout
0045     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0046 <span class="keyword">else</span>
0047     gui_mainfcn(gui_State, varargin{:});
0048 <span class="keyword">end</span>
0049 <span class="comment">% End initialization code - DO NOT EDIT</span>
0050 
0051 
0052 <span class="comment">% --- Executes just before mtids is made visible.</span>
0053 <a name="_sub1" href="#_subfunctions" class="code">function mtids_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0054 <span class="comment">% This function has no output args, see OutputFcn.</span>
0055 <span class="comment">% hObject    handle to figure</span>
0056 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0057 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0058 <span class="comment">% varargin   command line arguments to mtids (see VARARGIN)</span>
0059 
0060 disp(<span class="string">' '</span>);
0061 disp(<span class="string">'MTIDS 1.2'</span>);
0062 disp(<span class="string">'Test Rig for Large-Scale and Interconnected Dynamical Systems'</span>);
0063 disp(<span class="string">'&lt;a href=&quot;http://code.google.com/p/mtids&quot;&gt;http://code.google.com/p/mtids&lt;/a&gt;'</span>);
0064 disp(<span class="string">' '</span>);
0065 disp(<span class="string">'This program is free software; you can redistribute it and/or'</span>);
0066 disp(<span class="string">'modify it under the terms of the GNU General Public License'</span>);
0067 disp(<span class="string">'as published by the Free Software Foundation; either version 2'</span>);
0068 disp(<span class="string">'of the License, or (at your option) any later version.'</span>);
0069 disp(<span class="string">'This program is distributed in the hope that it will be useful,'</span>);
0070 disp(<span class="string">'but WITHOUT ANY WARRANTY; without even the implied warranty of'</span>);
0071 disp(<span class="string">'MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the'</span>);
0072 disp(<span class="string">'GNU General Public License for more details.'</span>);
0073 disp(<span class="string">' '</span>);
0074 disp(<span class="string">'You should have received a copy of the GNU General Public License'</span>);
0075 disp(<span class="string">'along with this program; if not, write to the Free Software'</span>);
0076 disp(<span class="string">'Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.'</span>);
0077 disp(<span class="string">' '</span>);
0078 disp(<span class="string">' '</span>);
0079 
0080 
0081 <span class="comment">%--------------------------------------------------------------------------</span>
0082 <span class="comment">%----------------INITIALISE PARAMETERS-------------------------------------</span>
0083 <span class="comment">%--------------------------------------------------------------------------</span>
0084 
0085 initPath = mfilename(<span class="string">'fullpath'</span>);
0086 <span class="comment">% extract path where mtids is localized</span>
0087 initPath = initPath(1:end-5);
0088 cd(initPath);
0089 addpath(strcat(pwd,<span class="string">'/subfunctions/matgraph'</span>));                     <span class="comment">% Folder with a copy of Matgraph</span>
0090 addpath(strcat(pwd,<span class="string">'/templates'</span>));                          <span class="comment">% Folder for Simulink templates</span>
0091 addpath(strcat(pwd,<span class="string">'/templates/import'</span>));                   <span class="comment">% Folder with importes templates</span>
0092 addpath(strcat(pwd,<span class="string">'/subfunctions'</span>));                       <span class="comment">% Folder with GUIs and functions</span>
0093 addpath(strcat(pwd,<span class="string">'/subfunctions/interface2Simulink'</span>));    <span class="comment">% Folder with various import/export functions</span>
0094 addpath(strcat(pwd,<span class="string">'/subfunctions/mtids_main'</span>));
0095 addpath(strcat(pwd,<span class="string">'/resources'</span>));                          <span class="comment">% Folder with resource files like manuals, graphics, etc.</span>
0096 addpath(strcat(pwd,<span class="string">'/subfunctions/figures'</span>));
0097 
0098 <span class="comment">%initialize graph</span>
0099 <a href="../mtids/subfunctions/matgraph/graph_init.html" class="code" title="function graph_init(capacity)">graph_init</a>;
0100 
0101 <span class="comment">%declare userdata as structures: data.*; with it global variables could be</span>
0102 <span class="comment">%erased</span>
0103 
0104 flagLoadSet = 0;
0105 <span class="keyword">try</span>
0106     <a href="#_sub58" class="code" title="subfunction load_settings(filename,handles)">load_settings</a>([<span class="string">'resources'</span> filesep <span class="string">'lastset'</span>],handles);
0107     data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0108     <span class="keyword">if</span> ~isempty(data)
0109         choice = questdlg(<span class="string">'Do you want to load the settings formerly used?'</span>, <span class="keyword">...</span>
0110             <span class="string">'Former settings?'</span>, <span class="keyword">...</span>
0111             <span class="string">'Yes'</span>,<span class="string">'Yes, with last graph'</span>,<span class="string">'No'</span>,<span class="string">'No'</span>);
0112         <span class="keyword">switch</span> choice
0113             <span class="keyword">case</span> <span class="string">'Yes'</span>;
0114                 flagLoadSet = 1;
0115             <span class="keyword">case</span> <span class="string">'Yes, with last graph'</span>;
0116                 <a href="#_sub60" class="code" title="subfunction loadGraphAtOpening(hObject, eventdata, handles)">loadGraphAtOpening</a>(hObject, eventdata, handles);
0117                 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0118                 flagLoadSet = 2;
0119             <span class="keyword">case</span> <span class="string">'No'</span>;
0120                 flagLoadSet = 0;
0121         <span class="keyword">end</span>
0122     <span class="keyword">end</span>
0123 <span class="keyword">catch</span>
0124     <span class="comment">%</span>
0125 <span class="keyword">end</span>
0126 
0127 <span class="comment">% Setting the parameters according to chosen old data</span>
0128 <span class="keyword">switch</span> flagLoadSet
0129     <span class="keyword">case</span> 1;
0130         data.templates = cell(0,1);
0131         data.printCell = cell(0,2);
0132         data.nodeColor = cell(0,2);
0133         g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>; <span class="comment">%% Creating a graph</span>
0134         <a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>(g,0);
0135         data.g = g;
0136         
0137     <span class="keyword">case</span> 2;
0138         
0139     <span class="keyword">otherwise</span>;
0140         data.plotAllOutput = 1;
0141         data.flag_showSimMod = 1;
0142         data.template_list = cell(0,3);
0143         data.modus = <span class="string">'undirected'</span>;
0144 <span class="comment">%         % template_list-data for debugging/testing-purpose</span>
0145 <span class="comment">%         data.template_list{1,1} = 'LTI';</span>
0146 <span class="comment">%         data.template_list{1,2} = [245 245 245]/255; % node face color for template</span>
0147 <span class="comment">%         data.template_list{1,3} = [0 0 0]; % node edge color for template</span>
0148 <span class="comment">%         paramValues(1).set = cell( 1,3 ); % param values</span>
0149 <span class="comment">%         data.template_list{1,4} = paramValues;</span>
0150 <span class="comment">%         data.template_list{1,5} = 1; % is active (or not), logical</span>
0151         data.templates = cell(0,1);
0152         data.printCell = cell(0,2);
0153         data.nodeColor = cell(0,2);
0154         g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>; <span class="comment">%% Creating a graph</span>
0155         <a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>(g,0);
0156         data.g = g;
0157 <span class="keyword">end</span>
0158 
0159 data.template_list = <a href="../mtids/subfunctions/mtids_main/readImportedTemplates.html" class="code" title="function varargout = readImportedTemplates( varargin )">readImportedTemplates</a>(data.template_list);
0160 data.move_index = 0;
0161 data.expSucc = 0;
0162 data.botton_down = 0;
0163 data.add_connection = 0;
0164 data.start_index = 0;
0165 data.graph_refresh = 1;
0166 data.adaptInputParams = <span class="string">'ones'</span>;
0167 
0168 <span class="comment">%container for plot information -</span>
0169 <span class="comment">% 1.column: printVector -- containes the information about node number,</span>
0170 <span class="comment">%internal states and which should be plotted</span>
0171 <span class="comment">%2. column: plotParams -- the design information for the plot command, a</span>
0172 <span class="comment">%struct with 6 elements per state</span>
0173 <span class="comment">%       Example: a node has 3 int. states, 2 should be plotted, then</span>
0174 <span class="comment">%       struct(1) and struct(2) exists, each with 6 elements</span>
0175 
0176 
0177 <span class="comment">%--------------------------------------------------------------------------</span>
0178 <span class="comment">%-------------------INITIALISE GUI-----------------------------------------</span>
0179 <span class="comment">%--------------------------------------------------------------------------</span>
0180 
0181 <span class="keyword">if</span> strcmp(data.modus, <span class="string">'undirected'</span>)
0182     set(handles.button_undirected,<span class="string">'Value'</span>,1);
0183     set(handles.button_directed,<span class="string">'Value'</span>,0);
0184 <span class="keyword">elseif</span> strcmp(data.modus, <span class="string">'directed'</span>)
0185     set(handles.button_undirected,<span class="string">'Value'</span>,0);
0186     set(handles.button_directed,<span class="string">'Value'</span>,1);
0187 <span class="keyword">end</span>
0188 
0189 <span class="keyword">if</span> data.plotAllOutput == 0
0190     set(handles.plotAllOutput,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0191 <span class="keyword">elseif</span> data.plotAllOutput == 1
0192     set(handles.plotAllOutput,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0193 <span class="keyword">end</span>
0194 
0195 <span class="keyword">if</span> data.flag_showSimMod == 0
0196     set(handles.showSimMod,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
0197 <span class="keyword">elseif</span> data.flag_showSimMod == 1
0198     set(handles.showSimMod,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
0199 <span class="keyword">end</span>
0200 
0201 <span class="comment">%grid on;</span>
0202 <span class="comment">%zoom on;</span>
0203 set(handles.numberview,<span class="string">'Check'</span>,<span class="string">'on'</span>);
0204 set(handles.number_button,<span class="string">'Value'</span>, 1);
0205 set(handles.newnodelabel,<span class="string">'String'</span>,<span class="string">'Node'</span>);
0206 set(handles.strong_connections,<span class="string">'String'</span>, <span class="string">' '</span>);        
0207 set(handles.text16,<span class="string">'String'</span>, <span class="string">'Graph density:'</span>);
0208 
0209 <span class="comment">% store userdata, use tag 'appData'</span>
0210 setappdata(hObject,<span class="string">'appData'</span>,data);
0211 
0212 <a href="#_sub43" class="code" title="subfunction refresh_dynamics(eventdata, handles)">refresh_dynamics</a>(eventdata, handles);
0213 <span class="comment">% Choose default command line output for mtids</span>
0214 handles.output = hObject;
0215 <span class="comment">% Update handles structure</span>
0216 guidata(hObject, handles);
0217 <span class="comment">% refresh_valueSet(handles);</span>
0218 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0219 <span class="comment">% UIWAIT makes mtids wait for user response (see UIRESUME)</span>
0220 <span class="comment">% uiwait(handles.figure1);</span>
0221 
0222 
0223 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0224 <a name="_sub2" href="#_subfunctions" class="code">function varargout = mtids_OutputFcn(hObject, eventdata, handles) </a>
0225 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0226 <span class="comment">% hObject    handle to figure</span>
0227 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0228 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0229 
0230 <span class="comment">% Get default command line output from handles structure</span>
0231 varargout{1} = handles.output;
0232 
0233 
0234 
0235 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0236 <a name="_sub3" href="#_subfunctions" class="code">function newnodelabel_CreateFcn(hObject, eventdata, handles)</a>
0237 <span class="comment">% hObject    handle to newnodelabel (see GCBO)</span>
0238 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0239 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0240 
0241 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0242 <span class="comment">%       See ISPC and COMPUTER.</span>
0243 <span class="keyword">if</span> ispc
0244     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0245 <span class="keyword">else</span>
0246     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
0247 <span class="keyword">end</span>
0248 
0249 
0250 <span class="comment">% --- Executes on button press in newnode.</span>
0251 <a name="_sub4" href="#_subfunctions" class="code">function newnode_Callback(hObject, eventdata, handles)</a>
0252 <span class="comment">% hObject    handle to newnode (see GCBO)</span>
0253 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0254 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0255 
0256 <span class="comment">% load application data</span>
0257 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0258 
0259 g = data.g;
0260 graph_refresh = data.graph_refresh;
0261 templates = data.templates;
0262 template_list = data.template_list;
0263 printCell = data.printCell;
0264 plotAllOutput = data.plotAllOutput;
0265 
0266 <a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>(g);
0267 new_vertex = <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) + 1;
0268 <a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>(g, new_vertex);
0269 labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
0270 lab_string =  get(handles.newnodelabel,<span class="string">'String'</span>);
0271 
0272 <span class="comment">% check if any of the existing names is equal as the new one</span>
0273 <span class="keyword">if</span> any(strncmp(lab_string,labs,length(lab_string))) 
0274     n = find(strcmp(lab_string,labs)); <span class="comment">% find index of node, which</span>
0275     <span class="comment">% contains the used name</span>
0276     <span class="keyword">if</span> n
0277         <a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>(g, n, [lab_string <span class="string">'1'</span>]); <span class="comment">% add a '1' to the unnumbered name</span>
0278         labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
0279     <span class="keyword">end</span>
0280     <span class="keyword">for</span> i=1:<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)
0281         <span class="comment">% check</span>
0282         <span class="keyword">if</span> strmatch(strcat(lab_string, num2str(i)),labs,<span class="string">'exact'</span>) <span class="comment">% check if current number 'i' is available</span>
0283             <span class="keyword">continue</span>;
0284         <span class="keyword">else</span>
0285            lab_string = strcat(lab_string, num2str(i)); <span class="comment">% if 'i' isn't contained, take this for the new name</span>
0286            <span class="keyword">break</span>; <span class="comment">% if a &quot;free&quot; name was discovered, quit the for-loop</span>
0287         <span class="keyword">end</span>
0288     <span class="keyword">end</span>
0289 <span class="keyword">end</span>
0290 
0291 <a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>(g, new_vertex, lab_string); 
0292 <span class="comment">% Get number of template name from list</span>
0293 n_template = get(handles.selector_dynamic, <span class="string">'Value'</span>); 
0294 n_valueSet = get(handles.selector_valueSet, <span class="string">'Value'</span>);
0295 templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),1} = template_list{n_template,1};
0296 templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2} = template_list{n_template,4}(n_valueSet);
0297 <span class="keyword">if</span> ~isfield(templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2},<span class="string">'setName'</span>) || isempty(templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2}.setName)
0298     temp = get(handles.selector_valueSet,<span class="string">'String'</span>);
0299     templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2}.setName = temp{n_valueSet};
0300 <span class="keyword">end</span>
0301 length_nodeColor = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(data.nodeColor,1);
0302 tempNodeColor = data.nodeColor;
0303 data.nodeColor = cell(length_nodeColor+1,2);
0304 <span class="keyword">for</span> i = 1:length_nodeColor
0305    data.nodeColor(i,:) = tempNodeColor(i,:);
0306 <span class="keyword">end</span>
0307 <span class="comment">% this line sets the face color for the node</span>
0308 data.nodeColor{length_nodeColor+1,1} = template_list{n_template,2};
0309 data.nodeColor{length_nodeColor+1,2} = template_list{n_template,3};
0310 
0311 <span class="comment">%Now, after the node was created, the printCell can be added</span>
0312 length_cellPrint = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(printCell,1);
0313 
0314 <span class="comment">%Keep the informations of the old nodes</span>
0315 tempCell = printCell;
0316 printCell = cell(length_cellPrint+1,2);
0317 <span class="keyword">for</span> i = 1:length_cellPrint
0318     printCell(i,:) = tempCell(i,:);
0319 <span class="keyword">end</span>
0320 
0321 <span class="comment">%Initially, the printVector and the plotParams are the same for all templates</span>
0322 statesDim = templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2}.dimension.states;
0323 outputDim = templates{<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2}.dimension.outputs;
0324 printVector = zeros(1,outputDim + statesDim);
0325 printVector(1:outputDim) = ones(1:outputDim)*plotAllOutput;
0326 printCell(length_cellPrint+1,1) = num2cell(printVector,2);
0327 printCell{length_cellPrint+1,2} = <a href="../mtids/subfunctions/initPlotParams.html" class="code" title="function argout = initPlotParams( dim )">initPlotParams</a>(outputDim);
0328 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0329 <span class="keyword">if</span> graph_refresh == 1
0330     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0331 <span class="keyword">end</span>
0332 <span class="comment">% store changed data back to structure 'data'</span>
0333 data.g = g;
0334 data.graph_refresh = graph_refresh;
0335 data.templates = templates;
0336 data.template_list = template_list;
0337 data.printCell = printCell;
0338 data.plotAllOutput = plotAllOutput;
0339 data.expSucc = 0;
0340 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0341 guidata(hObject, handles);
0342 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>( handles );
0343 
0344 
0345 <span class="comment">% --- Executes when user attempts to close figure1.</span>
0346 <a name="_sub5" href="#_subfunctions" class="code">function figure1_CloseRequestFcn(hObject, eventdata, handles)</a>
0347 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
0348 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0349 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0350 
0351 <span class="comment">% load application data</span>
0352 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0353 
0354 <a href="#_sub59" class="code" title="subfunction save_settings(filename,handles)">save_settings</a>([<span class="string">'resources'</span> filesep <span class="string">'lastset'</span>],handles);
0355 filename = <span class="string">'lastgraph.mat'</span>;
0356 pathname = [pwd filesep <span class="string">'resources'</span> filesep];
0357 <a href="#_sub64" class="code" title="subfunction saveGraph(hObject, eventdata, handles, pathname, filename)">saveGraph</a>(hObject, eventdata, handles, pathname, filename);
0358 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0359 
0360 <span class="comment">% Hint: delete(hObject) closes the figure</span>
0361 <span class="comment">%global g;</span>
0362 g = data.g;
0363 <a href="../mtids/subfunctions/matgraph/@graph/free.html" class="code" title="function free(g)">free</a>(g)
0364 <a href="../mtids/subfunctions/matgraph/graph_destroy.html" class="code" title="function graph_destroy">graph_destroy</a>;
0365 <span class="comment">%store application data</span>
0366 data.g = g;
0367 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0368 
0369 guidata(hObject, handles);
0370 
0371 <span class="comment">% graph_destroy();</span>
0372 <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(hObject);
0373 
0374 
0375 
0376 <span class="comment">% --- Executes on button press in addconnection.</span>
0377 <a name="_sub6" href="#_subfunctions" class="code">function addconnection_Callback(hObject, eventdata, handles)</a>
0378 <span class="comment">% hObject    handle to addconnection (see GCBO)</span>
0379 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0380 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0381 
0382 <span class="comment">%load application data</span>
0383 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0384 g = data.g;
0385 modus = data.modus;
0386 
0387 <span class="comment">% Fix connections</span>
0388 <span class="comment">% Search labels</span>
0389 label1 = get(handles.fromnode,<span class="string">'String'</span>);
0390 label2 = get(handles.tonode,<span class="string">'String'</span>);
0391 
0392 <span class="keyword">if</span> (get(handles.label_button,<span class="string">'Value'</span>) == get(handles.label_button,<span class="string">'Max'</span>))
0393     labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
0394     n1 = strmatch(label1, labs, <span class="string">'exact'</span>);
0395     n2 = strmatch(label2, labs, <span class="string">'exact'</span>);
0396 <span class="keyword">else</span>
0397     n1 = str2num(label1);
0398     n2 = str2num(label2);
0399 <span class="keyword">end</span>
0400 
0401 <span class="keyword">switch</span> modus
0402     <span class="keyword">case</span> <span class="string">'undirected'</span>;
0403         <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,n1(1), n2(1));
0404         <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0405     <span class="keyword">case</span> <span class="string">'directed'</span>;
0406         <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,n1(1), n2(1),1);
0407         <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0408 <span class="keyword">end</span>
0409 
0410 <span class="comment">%refresh_graph(0, eventdata, handles,hObject);</span>
0411 
0412 <span class="comment">%store application data</span>
0413 data.modus = modus;
0414 data.g = g;
0415 setappdata(handles.figure1,<span class="string">'appData'</span>, data);
0416 guidata(hObject, handles);
0417 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>(handles);
0418 
0419 
0420 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0421 <a name="_sub7" href="#_subfunctions" class="code">function fromnode_CreateFcn(hObject, eventdata, handles)</a>
0422 <span class="comment">% hObject    handle to fromnode (see GCBO)</span>
0423 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0424 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0425 
0426 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0427 <span class="comment">%       See ISPC and COMPUTER.</span>
0428 <span class="keyword">if</span> ispc
0429     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0430 <span class="keyword">else</span>
0431     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
0432 <span class="keyword">end</span>
0433 
0434 
0435 
0436 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0437 <a name="_sub8" href="#_subfunctions" class="code">function tonode_CreateFcn(hObject, eventdata, handles)</a>
0438 <span class="comment">% hObject    handle to tonode (see GCBO)</span>
0439 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0440 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0441 
0442 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0443 <span class="comment">%       See ISPC and COMPUTER.</span>
0444 <span class="keyword">if</span> ispc
0445     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0446 <span class="keyword">else</span>
0447     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
0448 <span class="keyword">end</span>
0449 
0450 
0451 
0452 <span class="comment">% --- Executes on button press in randomconnection.</span>
0453 <a name="_sub9" href="#_subfunctions" class="code">function randomconnection_Callback(hObject, eventdata, handles)</a>
0454 <span class="comment">% hObject    handle to randomconnection (see GCBO)</span>
0455 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0456 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0457 
0458 <span class="comment">%load application data</span>
0459 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0460 g = data.g;
0461 modus = data.modus;
0462 <span class="keyword">switch</span> modus
0463     <span class="keyword">case</span> <span class="string">'undirected'</span>;
0464         dir = 0;
0465     <span class="keyword">case</span> <span class="string">'directed'</span>;
0466         dir = 1;
0467 <span class="keyword">end</span>
0468 a = ceil(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)*rand());
0469 b = floor(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)*rand());
0470 <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,a,b,dir);
0471 <span class="comment">%store application data</span>
0472 data.modus = modus;
0473 data.g = g;
0474 setappdata(handles.figure1,<span class="string">'appData'</span>, data);
0475 guidata(hObject, handles);
0476 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0477 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>(handles);
0478 
0479 
0480 <span class="comment">% --- Executes on button press in removeconnection.</span>
0481 <a name="_sub10" href="#_subfunctions" class="code">function removeconnection_Callback(hObject, eventdata, handles)</a>
0482 <span class="comment">% hObject    handle to removeconnection (see GCBO)</span>
0483 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0484 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0485 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0486 g = data.g;
0487 modus = data.modus;
0488 
0489 <span class="comment">% Arreglar conexiones</span>
0490 <span class="comment">% Buscar en labels</span>
0491 label1 = get(handles.fromnode,<span class="string">'String'</span>);
0492 label2 = get(handles.tonode,<span class="string">'String'</span>);
0493 <span class="comment">%the radio buttons &quot;Label&quot; and &quot;Node number&quot; evaluates, if a node is</span>
0494 <span class="comment">%adressed via its number or label</span>
0495 <span class="keyword">if</span> (get(handles.label_button,<span class="string">'Value'</span>) == get(handles.label_button,<span class="string">'Max'</span>)) 
0496     <span class="comment">%if this is true, the radio button is selected</span>
0497     labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
0498     <span class="comment">%n1 = strmatch(label1, labs, 'exact');</span>
0499     n1 = find(strcmp(label1, labs));
0500     <span class="comment">%n2 = strmatch(label2, labs, 'exact');</span>
0501     n2 = find(strcmp(label2, labs));
0502 <span class="keyword">elseif</span> (get(handles.number_button,<span class="string">'Value'</span>) == get(handles.label_button,<span class="string">'Max'</span>))
0503     n1 = str2num(label1);
0504     n2 = str2num(label2);
0505 <span class="keyword">end</span>
0506 <span class="keyword">switch</span> modus
0507     <span class="keyword">case</span> <span class="string">'undirected'</span>;
0508         <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,n1(1),n2(1));     
0509     <span class="keyword">case</span> <span class="string">'directed'</span>;
0510         dir = 1;
0511         <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,n1(1), n2(1), dir);
0512 <span class="keyword">end</span>
0513 
0514 <span class="comment">%store application data</span>
0515 data.g = g;
0516 data.modus = modus;
0517 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0518 guidata(hObject, handles);
0519 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0520 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>(handles);
0521 
0522 
0523 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0524 <a name="_sub11" href="#_subfunctions" class="code">function remnode_CreateFcn(hObject, eventdata, handles)</a>
0525 <span class="comment">% hObject    handle to remnode (see GCBO)</span>
0526 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0527 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0528 
0529 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0530 <span class="comment">%       See ISPC and COMPUTER.</span>
0531 <span class="keyword">if</span> ispc
0532     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0533 <span class="keyword">else</span>
0534     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
0535 <span class="keyword">end</span>
0536 
0537 
0538 <span class="comment">% --- Executes on button press in removenode.</span>
0539 <a name="_sub12" href="#_subfunctions" class="code">function removenode_Callback(hObject, eventdata, handles)</a>
0540 <span class="comment">% hObject    handle to removenode (see GCBO)</span>
0541 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0542 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0543 
0544 <span class="comment">% load application data</span>
0545 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0546 g = data.g;
0547 templates = data.templates;
0548 printCell = data.printCell;
0549 
0550 a = str2num(get(handles.remnode,<span class="string">'String'</span>));
0551 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &amp;&amp; (a &lt;= <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g))
0552     templates(a,:) = []; <span class="comment">% Deleting the template for the node, which should be deleted</span>
0553     <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,a);
0554     <span class="comment">%Here, the i-th entry of the printCell must be deleted too</span>
0555     length_printCell = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(printCell,1);
0556     temp_printCell = printCell;
0557     printCell = cell(length_printCell-1,2);
0558     <span class="keyword">for</span> i = 1:(a-1)
0559         printCell(i,:) = temp_printCell(i,:);
0560     <span class="keyword">end</span>
0561     <span class="keyword">for</span> i = (a+1):length_printCell
0562         printCell(i-1,:) = temp_printCell(i,:);
0563     <span class="keyword">end</span>
0564     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0565 <span class="keyword">end</span>
0566 
0567 <span class="comment">%store application data</span>
0568 data.g = g;
0569 data.templates = templates;
0570 data.printCell = printCell;
0571 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0572 guidata(hObject, handles);
0573 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>(handles);
0574 
0575 
0576 <span class="comment">% --- Executes on button press in trimgraph.</span>
0577 <a name="_sub13" href="#_subfunctions" class="code">function trimgraph_Callback(hObject, eventdata, handles)</a>
0578 <span class="comment">% hObject    handle to trimgraph (see GCBO)</span>
0579 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0580 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0581 
0582 <span class="comment">%load application data</span>
0583 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0584 
0585 <a href="../mtids/subfunctions/matgraph/@graph/trim.html" class="code" title="function trim(g,d)">trim</a>(data.g);
0586 
0587 <span class="comment">%store application data</span>
0588 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0589 guidata(hObject, handles);
0590 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0591 
0592 
0593 <span class="comment">% --- Executes on button press in clearconnections.</span>
0594 <a name="_sub14" href="#_subfunctions" class="code">function clearconnections_Callback(hObject, eventdata, handles)</a>
0595 <span class="comment">% hObject    handle to clearconnections (see GCBO)</span>
0596 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0597 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0598 
0599 <span class="comment">%load application data</span>
0600 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0601 g = data.g;
0602 <span class="comment">%global g;</span>
0603 
0604 <a href="../mtids/subfunctions/matgraph/@graph/clear_edges.html" class="code" title="function clear_edges(g)">clear_edges</a>(g);
0605 
0606 <span class="comment">%store application data</span>
0607 data.g = g;
0608 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0609 guidata(hObject, handles);
0610 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0611 
0612 
0613 <span class="comment">% --- Executes on button press in completegraph.</span>
0614 <a name="_sub15" href="#_subfunctions" class="code">function completegraph_Callback(hObject, eventdata, handles)</a>
0615 <span class="comment">% hObject    handle to completegraph (see GCBO)</span>
0616 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0617 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0618 
0619 <span class="comment">%load application data</span>
0620 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0621 g = data.g;
0622 
0623 <a href="../mtids/subfunctions/matgraph/@graph/complete.html" class="code" title="function complete(g,a,b)">complete</a>(g);
0624 
0625 <span class="comment">%store application data</span>
0626 data.g = g;
0627 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0628 guidata(hObject, handles);
0629 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0630 
0631 
0632 <span class="comment">% --- Executes on button press in randomgraph.</span>
0633 <a name="_sub16" href="#_subfunctions" class="code">function randomgraph_Callback(hObject, eventdata, handles)</a>
0634 <span class="comment">% hObject    handle to randomgraph (see GCBO)</span>
0635 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0636 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0637 
0638 <span class="comment">%load application data</span>
0639 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0640 <span class="keyword">switch</span> data.modus
0641     <span class="keyword">case</span> <span class="string">'undirected'</span>;
0642         <a href="../mtids/subfunctions/matgraph/@graph/random.html" class="code" title="function random(g,arg1,arg2)">random</a>(data.g,1/2);
0643     <span class="keyword">case</span> <span class="string">'directed'</span>;
0644         <a href="../mtids/subfunctions/matgraph/@graph/random.html" class="code" title="function random(g,arg1,arg2)">random</a>(data.g);
0645 <span class="keyword">end</span>
0646 <span class="comment">%store application data</span>
0647 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0648 guidata(hObject, handles);
0649 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject)
0650 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>(handles);
0651 
0652 
0653 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0654 <a name="_sub17" href="#_subfunctions" class="code">function listbox1_CreateFcn(hObject, eventdata, handles)</a>
0655 <span class="comment">% hObject    handle to listbox1 (see GCBO)</span>
0656 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0657 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0658 
0659 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
0660 <span class="comment">%       See ISPC and COMPUTER.</span>
0661 <span class="keyword">if</span> ispc
0662     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0663 <span class="keyword">else</span>
0664     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
0665 <span class="keyword">end</span>
0666 
0667 
0668 <span class="comment">% --------------------------------------------------------------------</span>
0669 <a name="_sub18" href="#_subfunctions" class="code">function Newgraph_Callback(hObject, eventdata, handles)</a>
0670 <span class="comment">% hObject    handle to Newgraph (see GCBO)</span>
0671 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0672 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0673 
0674 <span class="comment">%load application data</span>
0675 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0676 g = data.g;
0677 
0678 <a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>(g,0);
0679 templates = cell(0,1);
0680 
0681 <span class="comment">%store application data</span>
0682 data.g = g;
0683 data.templates = templates;
0684 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0685 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(1, eventdata, handles,hObject);
0686 
0687 
0688 <span class="comment">% --------------------------------------------------------------------</span>
0689 <a name="_sub19" href="#_subfunctions" class="code">function loadgraph_Callback(hObject, eventdata, handles)</a>
0690 <span class="comment">% hObject    handle to loadgraph (see GCBO)</span>
0691 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0692 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0693 
0694 <span class="comment">% load application data</span>
0695 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0696 g = data.g;
0697 template_list = data.template_list;
0698 
0699 [filename, pathname] = uigetfile( <span class="keyword">...</span>
0700 {<span class="string">'*.mat;'</span>,<span class="string">'Graph/Network Files'</span>;
0701    <span class="string">'*.mat'</span>,<span class="string">'MAT-files (*.mat)'</span>; <span class="keyword">...</span>
0702     <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>}, <span class="keyword">...</span>
0703    <span class="string">'Open'</span>);
0704 
0705 <span class="keyword">if</span> filename
0706          
0707     file = strcat(pathname, filename);
0708     [pathname, filename, ext] = fileparts(file);
0709 
0710     <a href="../mtids/subfunctions/matgraph/@graph/free.html" class="code" title="function free(g)">free</a>(g);
0711     
0712     <span class="keyword">if</span> strcmp(ext, <span class="string">'.mat'</span>) 
0713         S = <a href="../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>(file, <span class="string">'nverts'</span>, <span class="string">'nedges'</span>,<span class="string">'adj_matrix'</span>, <span class="string">'XY'</span>, <span class="string">'labs'</span>, <span class="string">'templates'</span>,<span class="keyword">...</span>
0714             <span class="string">'printCell'</span>,<span class="string">'template_list'</span>,<span class="string">'modus'</span>,<span class="string">'nodeColor'</span>) ;
0715         <span class="comment">%S = load(file, 'data' );</span>
0716         <span class="comment">%data = S.data;</span>
0717         <span class="comment">%assignin('base','data',data);</span>
0718         
0719         nverts = S.nverts;
0720         adj_matrix = S.adj_matrix;
0721         XY = S.XY;
0722         labs = S.labs;
0723         templates = S.templates;
0724         template_list = S.template_list;
0725         data.modus = S.modus;
0726         data.printCell = S.printCell;
0727         data.nodeColor = S.nodeColor;
0728         g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>(nverts);
0729         <span class="keyword">switch</span> data.modus;
0730             <span class="keyword">case</span> <span class="string">'undirected'</span>; dir = 0;
0731             <span class="keyword">case</span> <span class="string">'directed'</span>; dir = 1;
0732         <span class="keyword">end</span>
0733 
0734         <span class="keyword">for</span> i=1:nverts
0735             <a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>(g,i,labs{i});
0736             <span class="keyword">for</span> j=1:nverts
0737               <span class="keyword">if</span> adj_matrix(i,j)
0738                  <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,i,j,dir);
0739                  adj_matrix(j,i) = 0;
0740               <span class="keyword">end</span>            
0741             <span class="keyword">end</span>
0742         <span class="keyword">end</span>
0743 
0744         <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g,XY);
0745         
0746     <span class="keyword">elseif</span> strcmp(ext, <span class="string">'.gr'</span>)
0747         <a href="../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>(g, file);
0748         templates = cell(0,1);
0749         <span class="comment">% Temporary code...</span>
0750         n_template = get(handles.selector_dynamic, <span class="string">'Value'</span>); <span class="comment">% Get template name from list</span>
0751 
0752         <span class="keyword">for</span> i=1:<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)
0753             templates{i,1}=template_list{n_template,1};
0754         <span class="keyword">end</span>
0755         
0756     <span class="keyword">end</span>
0757 <span class="keyword">end</span>
0758 
0759 <span class="comment">%set the uipanel according to stored value of &quot;modus&quot;</span>
0760 <span class="keyword">switch</span> data.modus
0761     <span class="keyword">case</span> <span class="string">'directed'</span>
0762         set(handles.button_undirected,<span class="string">'Value'</span>, 0.0);
0763         set(handles.button_directed,<span class="string">'Value'</span>, 1.0);
0764     <span class="keyword">case</span> <span class="string">'undirected'</span>
0765         set(handles.button_undirected,<span class="string">'Value'</span>, 1.0);
0766         set(handles.button_directed,<span class="string">'Value'</span>, 0.0);        
0767 <span class="keyword">end</span>
0768 
0769 <span class="comment">%store application data</span>
0770 data.g = g;
0771 data.templates = templates;
0772 data.template_list = template_list;
0773 
0774 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0775 guidata(hObject, handles);
0776 <a href="#_sub43" class="code" title="subfunction refresh_dynamics(eventdata, handles)">refresh_dynamics</a>(eventdata, handles);
0777 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0778 
0779 
0780 <span class="comment">% --------------------------------------------------------------------</span>
0781 <a name="_sub20" href="#_subfunctions" class="code">function savegraphas_Callback(hObject, eventdata, handles)</a>
0782 <span class="comment">% hObject    handle to savegraphas (see GCBO)</span>
0783 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0784 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0785 
0786 [filename, pathname] = uiputfile( <span class="keyword">...</span>
0787 {  <span class="string">'*.mat'</span>,<span class="string">'MAT-files [Prefered] (*.mat)'</span>; <span class="keyword">...</span>
0788    <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>;}, <span class="keyword">...</span>
0789    <span class="string">'Save'</span>);
0790 <a href="#_sub64" class="code" title="subfunction saveGraph(hObject, eventdata, handles, pathname, filename)">saveGraph</a>(hObject, eventdata, handles, pathname, filename);
0791 
0792 <span class="comment">% --------------------------------------------------------------------</span>
0793 <a name="_sub21" href="#_subfunctions" class="code">function aboutmtids_Callback(hObject, eventdata, handles)</a>
0794 <span class="comment">% hObject    handle to aboutmtids (see GCBO)</span>
0795 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0796 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0797 <a href="../mtids/subfunctions/figures/about_mtids.html" class="code" title="function varargout = about_mtids(varargin)">about_mtids</a>();
0798 
0799 
0800 <span class="comment">% --------------------------------------------------------------------</span>
0801 <a name="_sub22" href="#_subfunctions" class="code">function labelview_Callback(hObject, eventdata, handles)</a>
0802 <span class="comment">% hObject    handle to labelview (see GCBO)</span>
0803 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0804 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0805 
0806 <span class="comment">%load application data</span>
0807 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0808 g = data.g;
0809 
0810 <span class="comment">%global g;</span>
0811 checkstatus = get(hObject,<span class="string">'Check'</span>);
0812 
0813 <span class="keyword">if</span> strcmp(checkstatus, <span class="string">'on'</span>)
0814     set(hObject,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0815 <span class="keyword">elseif</span> strcmp(checkstatus, <span class="string">'off'</span>)
0816     set(handles.colorview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0817     set(handles.labelview,<span class="string">'Check'</span>,<span class="string">'on'</span>);
0818     set(handles.numberview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0819     set(handles.blankview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0820     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject)
0821 <span class="keyword">end</span>
0822 
0823 <span class="comment">%store application data</span>
0824 data.g = g;
0825 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0826 
0827 guidata(hObject, handles);
0828 
0829 <span class="comment">% --------------------------------------------------------------------</span>
0830 <a name="_sub23" href="#_subfunctions" class="code">function colorview_Callback(hObject, eventdata, handles)</a>
0831 <span class="comment">% hObject    handle to colorview (see GCBO)</span>
0832 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0833 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0834 
0835 <span class="comment">%load application data</span>
0836 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0837 g = data.g;
0838 
0839 <span class="comment">%global g;</span>
0840 checkstatus = get(hObject,<span class="string">'Check'</span>);
0841 
0842 <span class="keyword">if</span> strcmp(checkstatus, <span class="string">'on'</span>)
0843     set(hObject,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0844 <span class="keyword">elseif</span> strcmp(checkstatus, <span class="string">'off'</span>)
0845     set(handles.colorview,<span class="string">'Check'</span>,<span class="string">'on'</span>);
0846     set(handles.labelview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0847     set(handles.numberview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0848     set(handles.blankview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0849     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject)
0850 <span class="keyword">end</span>
0851 
0852 guidata(hObject, handles);
0853 
0854 <span class="comment">% --------------------------------------------------------------------</span>
0855 <a name="_sub24" href="#_subfunctions" class="code">function numberview_Callback(hObject, eventdata, handles)</a>
0856 <span class="comment">% hObject    handle to numberview (see GCBO)</span>
0857 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0858 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0859 
0860 <span class="comment">%load application data</span>
0861 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0862 g = data.g;
0863 
0864 <span class="comment">%global g;</span>
0865 checkstatus = get(hObject,<span class="string">'Check'</span>);
0866 
0867 <span class="keyword">if</span> strcmp(checkstatus, <span class="string">'on'</span>)
0868     set(hObject,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0869 <span class="keyword">elseif</span> strcmp(checkstatus, <span class="string">'off'</span>)
0870     set(handles.colorview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0871     set(handles.labelview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0872     set(handles.numberview,<span class="string">'Check'</span>,<span class="string">'on'</span>);
0873     set(handles.blankview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0874     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject)
0875 <span class="keyword">end</span>
0876 
0877 <span class="comment">%store application data</span>
0878 data.g = g;
0879 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0880 
0881 guidata(hObject, handles);
0882 
0883 
0884 <span class="comment">% --------------------------------------------------------------------</span>
0885 <a name="_sub25" href="#_subfunctions" class="code">function blankview_Callback(hObject, eventdata, handles)</a>
0886 <span class="comment">% hObject    handle to blankview (see GCBO)</span>
0887 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0888 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0889 
0890 <span class="comment">%load application data</span>
0891 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0892 g = data.g;
0893 
0894 <span class="comment">%global g;</span>
0895 checkstatus = get(hObject,<span class="string">'Check'</span>);
0896 
0897 <span class="keyword">if</span> strcmp(checkstatus, <span class="string">'on'</span>)
0898     set(hObject,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0899 <span class="keyword">elseif</span> strcmp(checkstatus, <span class="string">'off'</span>)
0900     set(handles.colorview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0901     set(handles.labelview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0902     set(handles.numberview,<span class="string">'Check'</span>,<span class="string">'off'</span>);
0903     set(handles.blankview,<span class="string">'Check'</span>,<span class="string">'on'</span>);
0904     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
0905 <span class="keyword">end</span>
0906 
0907 <span class="comment">%store application data</span>
0908 data.g = g;
0909 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0910 
0911 guidata(hObject, handles);
0912 
0913 
0914 
0915 <span class="comment">% --------------------------------------------------------------------</span>
0916 <a name="_sub26" href="#_subfunctions" class="code">function export_as_layer_2_Callback(hObject, eventdata, handles)</a>
0917 <span class="comment">% hObject    handle to export_as_layer_2 (see GCBO)</span>
0918 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0919 <span class="comment">% handles    structure with handles and user data (see GUIDATA)global g;</span>
0920 
0921 <span class="comment">%load application data</span>
0922 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0923 g = data.g;
0924 templates = data.templates;
0925 template_list = data.template_list;
0926 
0927 A  = double(<a href="../mtids/subfunctions/matgraph/@graph/matrix.html" class="code" title="function A = matrix(g)">matrix</a>(g));
0928 
0929 <a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>(g);
0930 <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g);
0931 xy = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
0932 
0933 labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
0934 name =    <span class="string">'untitled'</span>;
0935 template =    <span class="string">'LTI'</span>; 
0936 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 200
0937     disp(<span class="string">'Exporting...may take some time...go get some coffee...'</span>);
0938 <span class="keyword">else</span>   
0939      disp(<span class="string">'Exporting...'</span>);
0940 <span class="keyword">end</span>
0941 disp(<span class="string">'  '</span>);
0942 
0943 <span class="comment">%function contained in folder &quot;interface2simulink&quot;</span>
0944 <a href="../mtids/subfunctions/interface2Simulink/exportLayer2.html" class="code" title="function[] =exportLayer2(name,template,templateList,A, xy, labs)">exportLayer2</a>(name,templates,template_list,A, xy, labs); 
0945 
0946 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 50
0947     disp(<span class="string">'Done exporting'</span>);
0948     disp(<span class="string">' '</span>);
0949     <span class="comment">%msgbox('Done exporting','Export to Simulink');</span>
0950 <span class="keyword">else</span>   
0951     disp(<span class="string">'Done exporting'</span>);
0952 <span class="keyword">end</span>
0953 
0954 <span class="comment">%store application data</span>
0955 data.g = g;
0956 data.templates = templates;
0957 data.template_list = template_list;
0958 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
0959 
0960 guidata(hObject, handles);
0961 
0962 
0963 <a name="_sub27" href="#_subfunctions" class="code">function refresh_graph(reset, eventdata, handles,hObject)</a>
0964 <span class="comment">% This function refreshes the graph window</span>
0965 
0966 <span class="comment">%load application data</span>
0967 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
0968 g = data.g;
0969 modus = data.modus;
0970 
0971 <span class="comment">% Check which kind of lable is activated</span>
0972 checklabel = get(handles.labelview,<span class="string">'Check'</span>);
0973 checknumber = get(handles.numberview,<span class="string">'Check'</span>);
0974 <span class="comment">%checkcolor = get(handles.colorview,'Check');</span>
0975 checkblank = get(handles.blankview,<span class="string">'Check'</span>);
0976  
0977 <span class="comment">% rmxy(g);</span>
0978 cla;
0979 <span class="keyword">if</span> reset == 1
0980     <a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>(g); <span class="comment">%rmxy: erase g's embedding</span>
0981 <span class="keyword">end</span>
0982 
0983 <span class="keyword">switch</span> modus
0984     <span class="keyword">case</span> <span class="string">'undirected'</span>;
0985         dir = 0;
0986         <span class="keyword">if</span>(<a href="../mtids/subfunctions/matgraph/@graph/ne.html" class="code" title="function m = ne(g,dir,h)">ne</a>(g)&gt;0) <span class="comment">%check if there are vertices in the current graph</span>
0987             <a href="#_sub28" class="code" title="subfunction basic_stats(eventdata, handles)">basic_stats</a>(eventdata, handles);
0988         <span class="keyword">else</span>
0989             set(handles.text22,<span class="string">'String'</span>, <span class="string">'Independent Graphs:'</span>);
0990             set(handles.connected_graphs,<span class="string">'String'</span>, <span class="string">'0'</span>);
0991             set(handles.text32,<span class="string">'String'</span>,<span class="string">' '</span>);
0992             set(handles.strong_connections,<span class="string">'String'</span>, <span class="string">' '</span>);            
0993             set(handles.text16,<span class="string">'String'</span>, <span class="string">'Graph density:'</span>);
0994             set(handles.graph_density,<span class="string">'String'</span>, <span class="string">'0'</span>);
0995             set(handles.text10,<span class="string">'String'</span>, <span class="string">'Average degree:'</span>);
0996             set(handles.average_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
0997             set(handles.text11,<span class="string">'String'</span>, <span class="string">'Median degree:'</span>);
0998             set(handles.median_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
0999             set(handles.text9,<span class="string">'String'</span>, <span class="string">'Minimum degree:'</span>);
1000             set(handles.minimum_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
1001             set(handles.text12,<span class="string">'String'</span>, <span class="string">'Maximum degree:'</span>);
1002             set(handles.maximum_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
1003             set(handles.text18,<span class="string">'String'</span>, <span class="string">'Graph heterogenity:'</span>);
1004             set(handles.graph_heterogenity,<span class="string">'String'</span>, <span class="string">'0'</span>);
1005             set(handles.text19,<span class="string">'String'</span>, <span class="string">'Algebraic connectivity:'</span>);
1006             set(handles.algebraic_connectivity,<span class="string">'String'</span>, <span class="string">'0'</span>);
1007         <span class="keyword">end</span>
1008 
1009     <span class="keyword">case</span> <span class="string">'directed'</span>;
1010         dir = 1;
1011         <span class="comment">% do something with the basic stats stuff</span>
1012         <span class="keyword">if</span>(<a href="../mtids/subfunctions/matgraph/@graph/ne.html" class="code" title="function m = ne(g,dir,h)">ne</a>(g)&gt;0) <span class="comment">%check if there are vertices in the current graph</span>
1013             <a href="#_sub28" class="code" title="subfunction basic_stats(eventdata, handles)">basic_stats</a>(eventdata, handles);
1014         <span class="keyword">else</span>
1015             set(handles.text32,<span class="string">'String'</span>,<span class="string">'Strong connected subgraphs:'</span>);
1016             set(handles.strong_connections,<span class="string">'String'</span>, <span class="string">'0'</span>);            
1017             set(handles.text22,<span class="string">'String'</span>, <span class="string">'Weak connected subgraphs:'</span>);
1018             set(handles.connected_graphs,<span class="string">'String'</span>, <span class="string">'0'</span>);
1019             set(handles.text9,<span class="string">'String'</span>, <span class="string">'Minimum In-Degree:'</span>);
1020             set(handles.minimum_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
1021             set(handles.text10,<span class="string">'String'</span>, <span class="string">'Maximum In-Degree: '</span>);
1022             set(handles.average_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
1023             set(handles.text11,<span class="string">'String'</span>, <span class="string">'Minimum Out-Degree:'</span>);
1024             set(handles.median_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
1025             set(handles.text12,<span class="string">'String'</span>, <span class="string">'Maximum Out-Degree:'</span>);
1026             set(handles.maximum_degree,<span class="string">'String'</span>, <span class="string">'0'</span>);
1027             set(handles.text16,<span class="string">'String'</span>, <span class="string">'Average Degree:'</span>);
1028             set(handles.graph_density,<span class="string">'String'</span>, <span class="string">'0'</span>);            
1029             set(handles.text18,<span class="string">'String'</span>, <span class="string">'Graph is balanced:'</span>);
1030             set(handles.graph_heterogenity,<span class="string">'String'</span>, <span class="string">'-'</span>);
1031             set(handles.text19,<span class="string">'String'</span>, <span class="string">'Has cycles:'</span>);
1032             set(handles.algebraic_connectivity,<span class="string">'String'</span>, <span class="string">'-'</span>);
1033         <span class="keyword">end</span>    
1034 <span class="keyword">end</span>
1035 <span class="comment">% set node color</span>
1036 
1037 <span class="comment">% check for choice of vertex-layout</span>
1038 <span class="keyword">if</span> strcmp(checklabel, <span class="string">'on'</span>)
1039     <a href="../mtids/subfunctions/matgraph/@graph/ldraw.html" class="code" title="function ldraw(g,dir,line_style,nodeFillColor,nodeEdgeColor)">ldraw</a>(g,dir,<span class="string">'-'</span>,data.nodeColor(:,1), data.nodeColor(:,2) );
1040 <span class="comment">%elseif strcmp(checkcolor, 'on')</span>
1041 <span class="comment">%    cdraw(g,dir);</span>
1042 <span class="keyword">elseif</span> strcmp(checknumber, <span class="string">'on'</span>)
1043     <a href="../mtids/subfunctions/matgraph/@graph/ndraw.html" class="code" title="function ndraw(g,dir,line_style,nodeFillColor,nodeEdgeColor)">ndraw</a>(g,dir,<span class="string">'-'</span>,data.nodeColor(:,1), data.nodeColor(:,2) );
1044 <span class="keyword">else</span>
1045     <a href="../mtids/subfunctions/matgraph/@graph/draw.html" class="code" title="function draw(g,dir,line_style,nodeFillColor,nodeEdgeColor)">draw</a>(g,dir,<span class="string">'-'</span>,data.nodeColor(:,1), data.nodeColor(:,2) );
1046 <span class="keyword">end</span>
1047 set(handles.nedges,<span class="string">'String'</span>, num2str(<a href="../mtids/subfunctions/matgraph/@graph/ne.html" class="code" title="function m = ne(g,dir,h)">ne</a>(g,dir)));
1048 set(handles.nvertices,<span class="string">'String'</span>,num2str(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)));
1049 <span class="comment">%store application data</span>
1050 data.g = g;
1051 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1052 <span class="comment">% If graph changed, input sizes of nodes must be computed newly</span>
1053 guidata(hObject, handles);
1054 <span class="comment">% computeInputSizes( handles );</span>
1055 
1056 
1057 <span class="comment">% --- Executes on button press in laplacianvisualize.</span>
1058 <a name="_sub28" href="#_subfunctions" class="code">function basic_stats(eventdata, handles)</a>
1059 <span class="comment">% hObject    handle to laplacianvisualize (see GCBO)</span>
1060 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1061 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1062 
1063 <span class="comment">%load application data</span>
1064 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1065 g = data.g;
1066 modus = data.modus;
1067 
1068 <span class="keyword">switch</span> modus
1069     <span class="keyword">case</span> <span class="string">'undirected'</span>;
1070         L = <a href="../mtids/subfunctions/matgraph/@graph/laplacian.html" class="code" title="function m = laplacian(g,s)">laplacian</a>(g);
1071         rank_L = rank(L);       <span class="comment">% Matrix rank</span>
1072         dim_L  = mean(<a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(L)); <span class="comment">% Matrix dimension</span>
1073         null_L = dim_L - rank(L); <span class="comment">%Rank of the null-space (from rank-nullity theorem)</span>
1074                                     <span class="comment">%Gives us number of connected (sub) graphs</span>
1075         degree_vector = diag(L);
1076         D = diag(diag(L));
1077         A = D - L; <span class="comment">% Adjacency matrix</span>
1078         rank_A = rank(A);       <span class="comment">% Matrix rank</span>
1079         dim_A  = mean(<a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(A)); <span class="comment">% Matrix dimension</span>
1080         null_A = dim_A - rank(A); <span class="comment">%Rank of the null-space (from rank-nullity theorem)</span>
1081                                     <span class="comment">%Gives us number of connected (sub) graphs</span>
1082         set(handles.text22,<span class="string">'String'</span>, <span class="string">'Independent Graphs:'</span>);
1083         set(handles.connected_graphs,<span class="string">'String'</span>, num2str(null_L,<span class="string">'%d'</span>));
1084         set(handles.text32,<span class="string">'String'</span>,<span class="string">' '</span>);
1085         set(handles.strong_connections,<span class="string">'String'</span>, <span class="string">' '</span>);        
1086         set(handles.text16,<span class="string">'String'</span>, <span class="string">'Graph density:'</span>);
1087         graph_density = mean(degree_vector)/(dim_L-1); <span class="comment">%(1)</span>
1088         set(handles.graph_density,<span class="string">'String'</span>, num2str(graph_density, <span class="string">'%1.3f'</span>));
1089         graph_average_degree = mean(degree_vector);
1090         set(handles.text10,<span class="string">'String'</span>, <span class="string">'Average degree:'</span>);
1091         set(handles.average_degree,<span class="string">'String'</span>, num2str(graph_average_degree, <span class="string">'%3.2f'</span>));
1092         set(handles.text11,<span class="string">'String'</span>, <span class="string">'Median degree:'</span>);
1093         graph_median_degree = median(degree_vector);
1094         set(handles.median_degree,<span class="string">'String'</span>, num2str(graph_median_degree));
1095         graph_min_degree = min(degree_vector);
1096         set(handles.text9,<span class="string">'String'</span>, <span class="string">'Minimum degree:'</span>);
1097         set(handles.minimum_degree,<span class="string">'String'</span>, num2str(graph_min_degree));
1098         graph_max_degree = max(degree_vector);
1099         set(handles.text12,<span class="string">'String'</span>, <span class="string">'Maximum degree:'</span>);
1100         set(handles.maximum_degree,<span class="string">'String'</span>, num2str(graph_max_degree));
1101         <span class="comment">%graph_density = 2*NEdges/(NVertex*(NVertex-1)); % Segun Wikipedia</span>
1102         graph_heterogenity = sqrt(var(degree_vector))/mean(degree_vector);
1103         set(handles.text18,<span class="string">'String'</span>, <span class="string">'Graph heterogenity:'</span>);
1104         set(handles.graph_heterogenity,<span class="string">'String'</span>, num2str(graph_heterogenity,<span class="string">'%1.3f'</span>));
1105         [Eigen_Matrix_L, Eigen_Values_L] = <a href="../mtids/subfunctions/matgraph/@graph/eig.html" class="code" title="function v = eig(g)">eig</a>(L);
1106         [Eigen_Matrix_A, Eigen_Values_A] = <a href="../mtids/subfunctions/matgraph/@graph/eig.html" class="code" title="function v = eig(g)">eig</a>(A);
1107 
1108         <span class="comment">% Sorting Eigenvalues</span>
1109         Eigen_Values_L = diag(Eigen_Values_L);
1110         [Eigen_Values_L, ndx] = sort(Eigen_Values_L, <span class="string">'ascend'</span>);
1111         Eigen_Matrix_L=Eigen_Matrix_L(:,ndx); 
1112 
1113         Eigen_Values_A = diag(Eigen_Values_A);
1114         [Eigen_Values_A, ndx] = sort(Eigen_Values_A, <span class="string">'ascend'</span>);
1115         Eigen_Matrix_A=Eigen_Matrix_A(:,ndx); 
1116 
1117         graph_connectivityA = Eigen_Values_A(null_L+1);
1118         graph_connectivity = Eigen_Values_L(null_L+1);
1119         set(handles.text19,<span class="string">'String'</span>, <span class="string">'Algebraic connectivity:'</span>);
1120         set(handles.algebraic_connectivity,<span class="string">'String'</span>, num2str(graph_connectivity));
1121         fiedler_vector   = Eigen_Matrix_L(:,null_L+1);
1122 
1123         estrada_connectivity = diag(exp(A));
1124 
1125         estrada_graph_index  = trace(exp(A));
1126  
1127     <span class="keyword">case</span> <span class="string">'directed'</span>;
1128         [InDeg OutDeg]=<a href="../mtids/subfunctions/getDegree.html" class="code" title="function [inDegree,outDegree] = getDegree(matrix)">getDegree</a>(<a href="../mtids/subfunctions/matgraph/@graph/matrixOfGraph.html" class="code" title="function A = matrixOfGraph(g)">matrixOfGraph</a>(g));
1129         LaplacianIn = diag(InDeg) - double(<a href="../mtids/subfunctions/matgraph/@graph/matrixOfGraph.html" class="code" title="function A = matrixOfGraph(g)">matrixOfGraph</a>(g));
1130         LaplacianOut = diag(OutDeg) - double(<a href="../mtids/subfunctions/matgraph/@graph/matrixOfGraph.html" class="code" title="function A = matrixOfGraph(g)">matrixOfGraph</a>(g));
1131         rank_L_In = rank(LaplacianIn); <span class="comment">%rank of laplacian with indegree</span>
1132         rank_L_Out = rank(LaplacianOut); <span class="comment">%rank of laplacian with outdegree</span>
1133         dim_L = mean(<a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(LaplacianIn)); <span class="comment">%matrix-dimension</span>
1134         
1135         set(handles.text22,<span class="string">'String'</span>, <span class="string">'Weak connected subgraphs:'</span>);
1136         set(handles.connected_graphs,<span class="string">'String'</span>, num2str( length( <a href="../mtids/subfunctions/compute_WCC.html" class="code" title="function WCC_sets = compute_WCC( graphINPUT )">compute_WCC</a>( data.g))));
1137         
1138         minInDeg = min(InDeg);
1139         maxInDeg = max(InDeg);
1140         minOutDeg = min(OutDeg);
1141         maxOutDeg = max(OutDeg);
1142         
1143         [i,j,s]=find(InDeg == OutDeg);
1144         
1145         <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(s,1) == dim_L
1146             isBalanced = <span class="string">'Yes'</span>;
1147         <span class="keyword">else</span> <span class="comment">%if size(s,1) &lt; dim_L</span>
1148             isBalanced = <span class="string">'No'</span>;
1149         <span class="keyword">end</span>
1150         strongCons = num2str( length( <a href="../mtids/subfunctions/compute_SCC.html" class="code" title="function SCC_sets = compute_SCC( graph1 )">compute_SCC</a>( data.g )));
1151         
1152         <span class="comment">% idea of detecting cyclic graphs: if there are less sets of SCC</span>
1153         <span class="comment">% as nodes in the graph, then there must be at least one cycle.</span>
1154         <span class="keyword">if</span> str2double( strongCons ) &lt; <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(data.g)
1155             isCyclic = <span class="string">'Yes'</span>;
1156         <span class="keyword">else</span>
1157             isCyclic = <span class="string">'No'</span>;
1158         <span class="keyword">end</span>       
1159         set(handles.text32,<span class="string">'String'</span>,<span class="string">'Strong connected subgraphs:'</span>);
1160         set(handles.strong_connections,<span class="string">'String'</span>, strongCons);
1161         set(handles.text9,<span class="string">'String'</span>, <span class="string">'Minimum In-Degree:'</span>);
1162         set(handles.minimum_degree,<span class="string">'String'</span>, num2str(minInDeg,<span class="string">'%d'</span>));        
1163         set(handles.text10,<span class="string">'String'</span>, <span class="string">'Maximum In-Degree:'</span>);
1164         set(handles.average_degree,<span class="string">'String'</span>, num2str(maxInDeg,<span class="string">'%d'</span>));
1165         set(handles.text11,<span class="string">'String'</span>, <span class="string">'Minimum Out-Degree:'</span>);
1166         set(handles.median_degree,<span class="string">'String'</span>, num2str(minOutDeg,<span class="string">'%d'</span>));
1167         set(handles.text12,<span class="string">'String'</span>, <span class="string">'Maximum Out-Degree:'</span>);
1168         set(handles.maximum_degree,<span class="string">'String'</span>, num2str(maxOutDeg,<span class="string">'%d'</span>));
1169         set(handles.text16,<span class="string">'String'</span>, <span class="string">'Average Degree:'</span>);
1170         set(handles.graph_density,<span class="string">'String'</span>, num2str(mean(InDeg), <span class="string">'%1.3f'</span>));        
1171         set(handles.text18,<span class="string">'String'</span>, <span class="string">'Graph is balanced:'</span>);
1172         set(handles.graph_heterogenity,<span class="string">'String'</span>, isBalanced);
1173         set(handles.text19,<span class="string">'String'</span>, <span class="string">'Has cycles:'</span>);
1174         set(handles.algebraic_connectivity,<span class="string">'String'</span>, isCyclic);
1175 <span class="keyword">end</span>
1176 <span class="comment">%no data storaged needed, because this is a &quot;void&quot; function</span>
1177 
1178 
1179 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1180 <a name="_sub29" href="#_subfunctions" class="code">function dynamic_label_CreateFcn(hObject, eventdata, handles)</a>
1181 <span class="comment">% hObject    handle to dynamic_label (see GCBO)</span>
1182 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1183 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1184 
1185 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1186 <span class="comment">%       See ISPC and COMPUTER.</span>
1187 <span class="keyword">if</span> ispc
1188     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1189 <span class="keyword">else</span>
1190     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
1191 <span class="keyword">end</span>
1192 
1193 
1194 <span class="comment">% --------------------------------------------------------------------</span>
1195 <a name="_sub30" href="#_subfunctions" class="code">function import_from_simulink_Callback(hObject, eventdata, handles)</a>
1196 <span class="comment">% hObject    handle to import_from_simulink (see GCBO)</span>
1197 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1198 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1199 
1200 <span class="comment">%load application data</span>
1201 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1202 g = data.g;
1203 template_list = data.template_list;
1204 templates = data.templates;
1205 
1206 [filename, pathname] = uigetfile( <span class="keyword">...</span>
1207 {<span class="string">'*.mdl'</span>,<span class="string">'Simulink Model (*.mdl)'</span>;
1208    <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>}, <span class="keyword">...</span>
1209    <span class="string">'Import Simulink model'</span>);
1210 
1211 file = strcat(pathname, filename);
1212 
1213 addpath(pathname);
1214  
1215 [pathname, model, ext] = fileparts(file); 
1216  
1217 [A, nverts, nedges, xy, labs ] = <a href="../mtids/subfunctions/interface2Simulink/importSimulink.html" class="code" title="function[A, nverts, nedges, xy, labs ] = importSimulink(model)">importSimulink</a>(model);
1218 
1219 <span class="comment">% Delete graph!</span>
1220   
1221 <span class="comment">% Deprecated! elist = adj_to_elist(A);</span>
1222 
1223 <a href="../mtids/subfunctions/matgraph/@graph/free.html" class="code" title="function free(g)">free</a>(g);
1224  
1225 g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>(nverts); 
1226   
1227 <span class="comment">% Preliminary template import</span>
1228 n_template = get(handles.selector_dynamic, <span class="string">'Value'</span>); <span class="comment">% Get template name from list</span>
1229 
1230 <span class="keyword">for</span> i=1:nverts
1231     <a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>(g,i,labs{i});
1232     templates{i,1}=template_list{n_template,1};
1233     <span class="keyword">for</span> j=1:nverts
1234         <span class="keyword">if</span> A(i,j)
1235              <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,i,j);
1236              A(j,i) = 0;
1237         <span class="keyword">end</span>            
1238     <span class="keyword">end</span>
1239 <span class="keyword">end</span>
1240 
1241 <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g,xy);
1242 
1243 <span class="comment">%store application data</span>
1244 data.g = g;
1245 data.template_list = template_list;
1246 data.templates = templates;
1247 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1248 guidata(hObject, handles);
1249 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1250 
1251 
1252 <span class="comment">% --------------------------------------------------------------------</span>
1253 <a name="_sub31" href="#_subfunctions" class="code">function export_to_simulink_Callback(hObject, eventdata, handles)</a>
1254 <span class="comment">% hObject    handle to export_to_simulink (see GCBO)</span>
1255 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1256 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1257 
1258 <span class="comment">%load application data</span>
1259 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1260 g = data.g;
1261 template_list = data.template_list;
1262 templates = data.templates;
1263 disp(<span class="string">'Export mode 1'</span>);
1264 A  = double(<a href="../mtids/subfunctions/matgraph/@graph/matrix.html" class="code" title="function A = matrix(g)">matrix</a>(g));
1265 
1266 <span class="comment">% Makes the graph a circle</span>
1267 <a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>(g);
1268 <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g);
1269 
1270 xy = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
1271 
1272 labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
1273 name =    <span class="string">'untitled'</span>;
1274 template =    <span class="string">'LTI'</span>; 
1275 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 200
1276     disp(<span class="string">'Exporting...may take some time...go get some coffee...'</span>);
1277 <span class="keyword">else</span>   
1278     disp(<span class="string">'Exporting...'</span>);
1279 <span class="keyword">end</span>
1280 disp(<span class="string">'  '</span>);
1281 
1282 <a href="../mtids/subfunctions/interface2Simulink/exportSimulink.html" class="code" title="function[] =exportSimulink(name,template,templateList,A, xy, labs)">exportSimulink</a>(name,templates,template_list,A, xy, labs);
1283 
1284 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 50
1285     disp(<span class="string">'Done exporting'</span>);
1286     disp(<span class="string">' '</span>);
1287     <span class="comment">%msgbox('Done exporting','Export to Simulink');</span>
1288 <span class="keyword">else</span>   
1289     disp(<span class="string">'Done exporting'</span>);
1290 <span class="keyword">end</span>
1291 <span class="comment">%no app data storage needed, because this can be seen as a &quot;void&quot; function.</span>
1292 
1293 
1294 <span class="comment">% --- Executes on button press in add_multiple_nodes.</span>
1295 <a name="_sub32" href="#_subfunctions" class="code">function add_multiple_nodes_Callback(hObject, eventdata, handles)</a>
1296 <span class="comment">% hObject    handle to add_multiple_nodes (see GCBO)</span>
1297 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1298 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1299 
1300 <span class="comment">%load application data</span>
1301 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1302 n_nodes = str2num(get(handles.number_of_nodes,<span class="string">'String'</span>));
1303 <span class="comment">% this is needed, because during creation of the nodes the graph isn't build</span>
1304 <span class="comment">% newly; only at the end the graph should built new.</span>
1305 data.graph_refresh = 0;
1306 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1307 <span class="keyword">for</span> i=1:n_nodes
1308    <a href="#_sub4" class="code" title="subfunction newnode_Callback(hObject, eventdata, handles)">newnode_Callback</a>(hObject, eventdata, handles); 
1309 <span class="keyword">end</span>
1310 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1311 <span class="comment">%store application data</span>
1312 data.graph_refresh = 1;
1313 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1314 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles, hObject);
1315 
1316 
1317 <span class="comment">% --------------------------------------------------------------------</span>
1318 <a name="_sub33" href="#_subfunctions" class="code">function exit_to_matlab_Callback(hObject, eventdata, handles)</a>
1319 <span class="comment">% hObject    handle to exit_to_matlab (see GCBO)</span>
1320 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1321 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1322 close(handles.output);
1323 
1324 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1325 <a name="_sub34" href="#_subfunctions" class="code">function number_of_nodes_CreateFcn(hObject, eventdata, handles)</a>
1326 <span class="comment">% hObject    handle to number_of_nodes (see GCBO)</span>
1327 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1328 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1329 
1330 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1331 <span class="comment">%       See ISPC and COMPUTER.</span>
1332 <span class="keyword">if</span> ispc
1333     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1334 <span class="keyword">else</span>
1335     set(hObject,<span class="string">'BackgroundColor'</span>,get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>));
1336 <span class="keyword">end</span>
1337 
1338 
1339 <span class="comment">% --- Executes on button press in label_button.</span>
1340 <a name="_sub35" href="#_subfunctions" class="code">function label_button_Callback(hObject, eventdata, handles)</a>
1341 <span class="comment">% hObject    handle to label_button (see GCBO)</span>
1342 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1343 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1344 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of label_button</span>
1345 set(handles.number_button,<span class="string">'Value'</span>, 0);
1346 set(handles.label_button,<span class="string">'Value'</span>, 1);
1347 
1348 
1349 <span class="comment">% --- Executes on button press in number_button.</span>
1350 <a name="_sub36" href="#_subfunctions" class="code">function number_button_Callback(hObject, eventdata, handles)</a>
1351 <span class="comment">% hObject    handle to number_button (see GCBO)</span>
1352 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1353 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1354 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of number_button</span>
1355 set(handles.label_button,<span class="string">'Value'</span>, 0);
1356 set(handles.number_button,<span class="string">'Value'</span>, 1);
1357 
1358 
1359 <span class="comment">% --------------------------------------------------------------------</span>
1360 <a name="_sub37" href="#_subfunctions" class="code">function export_to_workplace_Callback(hObject, eventdata, handles)</a>
1361 <span class="comment">% hObject    handle to export_to_workplace (see GCBO)</span>
1362 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1363 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1364 <span class="comment">%load application data</span>
1365 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1366 g = data.g;
1367 modus = data.modus;
1368 uiwait( <a href="../mtids/subfunctions/figures/export_as_matrix.html" class="code" title="function varargout = export_as_matrix(varargin)">export_as_matrix</a>(<a href="../mtids/subfunctions/matgraph/@graph/laplacian.html" class="code" title="function m = laplacian(g,s)">laplacian</a>(g),g,modus));
1369 
1370 
1371 <span class="comment">% --------------------------------------------------------------------</span>
1372 <a name="_sub38" href="#_subfunctions" class="code">function import_from_workplace_Callback(hObject, eventdata, handles)</a>
1373 <span class="comment">% hObject    handle to import_from_workplace (see GCBO)</span>
1374 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1375 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1376 
1377 <span class="comment">%load application data</span>
1378 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1379 g = data.g;
1380 templates = data.templates;
1381 template_list = data.template_list;
1382 modus = data.modus;
1383 <span class="comment">%printCell = data.printCell;</span>
1384 
1385 prompt = {<span class="string">'Workspace:'</span>,<span class="string">'Variable name:'</span>};
1386 dlg_title = <span class="string">'Inport matrix from workspace'</span>;
1387 num_lines = 1;
1388 def = {<span class="string">'base'</span>,<span class="string">'matrix'</span>};
1389 answer = inputdlg(prompt,dlg_title,num_lines,def);
1390 
1391 <span class="keyword">if</span> ~isempty(answer)
1392     M = evalin(answer{1},answer{2});
1393     <span class="keyword">switch</span> modus
1394         <span class="keyword">case</span> <span class="string">'undirected'</span>;
1395             elist = <a href="../mtids/subfunctions/interface2Simulink/any_matrix_to_elist.html" class="code" title="function elist = any_matrix_to_elist(M,dir)">any_matrix_to_elist</a>(M);
1396         <span class="keyword">case</span> <span class="string">'directed'</span>;
1397             elist = <a href="../mtids/subfunctions/interface2Simulink/any_matrix_to_elist.html" class="code" title="function elist = any_matrix_to_elist(M,dir)">any_matrix_to_elist</a>(M,1);
1398     <span class="keyword">end</span>    
1399     <span class="comment">%Corrects the problem posed by a zero-adj-matrix!</span>
1400     <span class="keyword">if</span> ( elist(1,:) == zeros(1,2)  )
1401         g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>( <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(M,1) );
1402     <span class="keyword">else</span>
1403         <span class="keyword">switch</span> modus
1404             <span class="keyword">case</span> <span class="string">'undirected'</span>;
1405                 g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>(elist);
1406             <span class="keyword">case</span> <span class="string">'directed'</span>;
1407                 maxM = max(M);
1408                 g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>(maxM(1));
1409                 <span class="keyword">for</span> i = 1:length(elist)
1410                     <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,elist(i,1),elist(i,2),1);
1411                 <span class="keyword">end</span>
1412         <span class="keyword">end</span>
1413     <span class="keyword">end</span>
1414     templates = cell(0,1);
1415     n_template = get(handles.selector_dynamic, <span class="string">'Value'</span>); <span class="comment">% Get template name from list</span>
1416     <span class="keyword">for</span> i=1:<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)
1417         templates{i,1}=template_list{n_template,1};
1418     <span class="keyword">end</span>
1419 <span class="keyword">end</span>
1420 <span class="comment">%Initialize the printCell</span>
1421 nrNodes = <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g);
1422 printCell = cell(nrNodes,2);
1423 <span class="keyword">for</span> i = 1:nrNodes
1424     printCell(i,1) = num2cell([1 0],2);
1425     printCell{i,1} = <a href="../mtids/subfunctions/initPlotParams.html" class="code" title="function argout = initPlotParams( dim )">initPlotParams</a>;
1426 <span class="keyword">end</span>
1427 <span class="comment">%store application data</span>
1428 data.g = g;
1429 data.templates = templates;
1430 data.template_list = template_list;
1431 data.modus = modus;
1432 data.printCell = printCell;
1433 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1434 guidata(hObject, handles);
1435 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1436 
1437 
1438 <span class="comment">% --------------------------------------------------------------------</span>
1439 <a name="_sub39" href="#_subfunctions" class="code">function add_mdl_template_Callback(hObject, eventdata, handles)</a>
1440 <span class="comment">% hObject    handle to add_mdl_template (see GCBO)</span>
1441 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1442 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1443 <span class="comment">%load application data</span>
1444 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1445 template_list = data.template_list;
1446 templates = data.templates;
1447 
1448 oldFolder = cd(strcat(pwd,<span class="string">'/templates'</span>));
1449 
1450 [filename, pathname] = uigetfile( <span class="keyword">...</span>
1451 {<span class="string">'*.mdl'</span>,<span class="string">'Simulink model template(*.mdl)'</span>;
1452    <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>}, <span class="keyword">...</span>
1453    <span class="string">'Import Simulink model templates'</span>, <span class="keyword">...</span>
1454    <span class="string">'MultiSelect'</span>, <span class="string">'on'</span>);
1455 
1456 <span class="keyword">if</span> iscell(filename)
1457     [a, b] = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(filename);
1458     <span class="keyword">for</span> i=1:b
1459         file = strcat(pathname, filename{i});
1460         [<a href="../mtids/subfunctions/matgraph/@graph/path.html" class="code" title="function path(g,n)">path</a>, template, ext] = fileparts(file);
1461         <span class="keyword">if</span> strcmp(<span class="string">'.mdl'</span>, ext)
1462             <span class="keyword">if</span> strmatch(template, template_list, <span class="string">'exact'</span>)
1463                 disp(strcat(<span class="string">'WARNING: A template with the name &quot;'</span>, template, <span class="string">'&quot; was already imported!'</span>));
1464                 <span class="keyword">continue</span>;
1465             <span class="keyword">else</span>
1466                 [ny, nx] = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(template_list);
1467                 template_list{ny+1,1} = template;
1468                 template_list{ny+1,2} = [1 1 1]; <span class="comment">%default color</span>
1469                 template_list{ny+1,3} = [0 0 1]; <span class="comment">%default color</span>
1470             <span class="keyword">end</span> 
1471         <span class="keyword">else</span>
1472             disp(strcat(<span class="string">'ERROR: &quot;'</span>,filename{i}, <span class="string">'&quot; is not a Simulink model'</span>));
1473         <span class="keyword">end</span>
1474     <span class="keyword">end</span> <span class="comment">% End del for</span>
1475 <span class="keyword">elseif</span> filename <span class="comment">%filename is not a cell (it's a string) and not 0</span>
1476     file = strcat(pathname, filename);
1477     [<a href="../mtids/subfunctions/matgraph/@graph/path.html" class="code" title="function path(g,n)">path</a>, template, ext] = fileparts(file);
1478     <span class="keyword">if</span> strcmp(<span class="string">'.mdl'</span>, ext)
1479         <span class="keyword">if</span> strmatch(template, template_list{:,1}, <span class="string">'exact'</span>)
1480             disp(strcat(<span class="string">'WARNING: A template with the name &quot;'</span>, template, <span class="string">'&quot; was already imported!'</span>));
1481         <span class="keyword">else</span>
1482             [ny, nx] = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(template_list);
1483             template_list{ny+1,1} = template;
1484             template_list{ny+1,2} = [1 1 1]; <span class="comment">%default color</span>
1485             template_list{ny+1,3} = [0 0 1]; <span class="comment">%default color</span>
1486         <span class="keyword">end</span> 
1487     <span class="keyword">else</span>
1488         disp(strcat(<span class="string">'ERROR: &quot;'</span>,filename, <span class="string">'&quot; is not a Simulink model'</span>));
1489     <span class="keyword">end</span>
1490 <span class="keyword">end</span>
1491 cd(oldFolder);
1492 <span class="comment">%store application data</span>
1493 data.template_list = template_list;
1494 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1495 <a href="#_sub43" class="code" title="subfunction refresh_dynamics(eventdata, handles)">refresh_dynamics</a>(eventdata, handles);
1496 guidata(hObject, handles);
1497  
1498 
1499 
1500 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1501 <a name="_sub40" href="#_subfunctions" class="code">function selector_dynamic_CreateFcn(hObject, eventdata, handles)</a>
1502 <span class="comment">% hObject    handle to selector_dynamic (see GCBO)</span>
1503 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1504 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1505 
1506 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
1507 <span class="comment">%       See ISPC and COMPUTER.</span>
1508 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1509     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1510 <span class="keyword">end</span>
1511 
1512 
1513 <span class="comment">% --- Executes on selection change in selector_dynamic.</span>
1514 <a name="_sub41" href="#_subfunctions" class="code">function selector_dynamic_Callback(hObject, eventdata, handles)</a>
1515 <span class="comment">% hObject    handle to selector_dynamic (see GCBO)</span>
1516 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1517 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1518 <span class="comment">% Hints: contents = cellstr(get(hObject,'String')) returns selector_dynamic contents as cell array</span>
1519 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from selector_dynamic</span>
1520 <span class="comment">%get(hObject,'Value')</span>
1521 <a href="#_sub44" class="code" title="subfunction refresh_valueSet(handles)">refresh_valueSet</a>(handles);
1522 
1523 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1524 <a name="_sub42" href="#_subfunctions" class="code">function selector_valueSet_CreateFcn(hObject, eventdata, handles)</a>
1525 <span class="comment">% hObject    handle to selector_valueSet (see GCBO)</span>
1526 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1527 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1528 
1529 <span class="comment">% Hint: popupmenu controls usually have a white background on Windows.</span>
1530 <span class="comment">%       See ISPC and COMPUTER.</span>
1531 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1532     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1533 <span class="keyword">end</span>
1534 
1535 
1536 <a name="_sub43" href="#_subfunctions" class="code">function refresh_dynamics(eventdata, handles)</a>
1537 <span class="comment">% This function refreshes the drop down menu of the dynamic templates</span>
1538 <span class="comment">%load application data</span>
1539 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1540 template_list = data.template_list;
1541 [ny, nx] = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(template_list);
1542 <span class="keyword">for</span> i=1:ny
1543     <span class="keyword">if</span> i == 1
1544         drop_string = template_list{1,1};
1545     <span class="keyword">elseif</span> i == ny
1546         drop_string = strcat(drop_string,<span class="string">'|'</span>,template_list{i,1});
1547     <span class="keyword">else</span>        
1548         drop_string = strcat(drop_string,<span class="string">'|'</span>,template_list{i,1});
1549     <span class="keyword">end</span>
1550 <span class="keyword">end</span>
1551 set(handles.selector_dynamic, <span class="string">'String'</span>, drop_string);
1552 <a href="#_sub44" class="code" title="subfunction refresh_valueSet(handles)">refresh_valueSet</a>(handles);
1553 <span class="comment">%guidata(hObject, handles);</span>
1554 <span class="comment">%no data storage needed, because this can be seen as a &quot;void&quot; function.</span>
1555  
1556 <a name="_sub44" href="#_subfunctions" class="code">function refresh_valueSet(handles)</a>
1557 <span class="comment">% This function refreshes the drop down menu of the parameter value sets</span>
1558 <span class="comment">% for the dynamic templates</span>
1559 <span class="comment">%load application data</span>
1560 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1561 <span class="comment">%Check which template is chosen</span>
1562 idxDynSelector = get(handles.selector_dynamic,<span class="string">'Value'</span>);
1563 stringDynSelector = get(handles.selector_dynamic,<span class="string">'String'</span>);
1564 <span class="comment">% Choose param struct</span>
1565 temp = ~cellfun( @isempty, regexp( data.template_list(:,1), <span class="keyword">...</span>
1566     regexp( stringDynSelector(idxDynSelector,:),<span class="string">'\w+'</span>,<span class="string">'match'</span>) ) );
1567 nrOfParamSets = length( data.template_list{temp,4} );
1568 <span class="comment">% drop_string = cell( nrOfParamSets,1 );</span>
1569 counter = 0;
1570 <span class="keyword">for</span> i=1:nrOfParamSets
1571     <span class="keyword">if</span> data.template_list{idxDynSelector,4}(i).isActive
1572         counter = counter + 1;
1573         <span class="comment">% Check if template contains a name for a set</span>
1574         <span class="keyword">if</span> isfield(data.template_list{idxDynSelector,4}(i),<span class="string">'setName'</span>) &amp;&amp;<span class="keyword">...</span>
1575                 ~isempty(data.template_list{idxDynSelector,4}(i).setName)
1576             drop_string{counter} = data.template_list{idxDynSelector,4}(i).setName; <span class="comment">%#ok&lt;AGROW&gt;</span>
1577         <span class="keyword">else</span>
1578             drop_string{counter} = [<span class="string">'Value set '</span> num2str(i)]; <span class="comment">%#ok&lt;AGROW&gt;</span>
1579         <span class="keyword">end</span>
1580     <span class="keyword">end</span>
1581 <span class="keyword">end</span>
1582 set(handles.selector_valueSet, <span class="string">'String'</span>, drop_string,<span class="string">'Value'</span>,1);
1583 
1584 
1585 <span class="comment">% --- Executes on button press in circular_graph.</span>
1586 <a name="_sub45" href="#_subfunctions" class="code">function circular_graph_Callback(hObject, eventdata, handles)</a>
1587 <span class="comment">% hObject    handle to circular_graph (see GCBO)</span>
1588 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1589 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1590 
1591 <span class="comment">%load application data</span>
1592 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1593 g = data.g;
1594 modus = data.modus;
1595 
1596 <span class="keyword">switch</span> modus
1597     <span class="keyword">case</span> <span class="string">'undirected'</span>;
1598         dir = 0;
1599     <span class="keyword">case</span> <span class="string">'directed'</span>;
1600         dir = 1;
1601 <span class="keyword">end</span>
1602 
1603 <a href="../mtids/subfunctions/matgraph/@graph/clear_edges.html" class="code" title="function clear_edges(g)">clear_edges</a>(g);
1604 
1605 <span class="keyword">for</span> i=1:(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)-1)
1606     <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,i,i+1,dir);
1607 <span class="keyword">end</span>
1608 <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),1,dir)
1609 
1610 <span class="comment">%store application data</span>
1611 data.g = g;
1612 data.modus = modus;
1613 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1614 guidata(hObject, handles);    
1615 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1616 
1617 
1618 
1619 <span class="comment">% --- Executes on mouse press over figure background, over a disabled or</span>
1620 <span class="comment">% --- inactive control, or over an axes background.</span>
1621 <a name="_sub46" href="#_subfunctions" class="code">function figure1_WindowButtonDownFcn(hObject, eventdata, handles)</a>
1622 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
1623 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1624 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1625 
1626 <span class="comment">%load application data</span>
1627 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1628 g = data.g;
1629 botton_down = data.botton_down;
1630 move_index = data.move_index;
1631 start_index = data.start_index;
1632 templates = data.templates;
1633 template_list = data.template_list;
1634 modus = data.modus;
1635 printCell = data.printCell;
1636 
1637 CP = get(handles.axes1, <span class="string">'CurrentPoint'</span>);
1638 x_c = CP(1,1);
1639 y_c = CP(1,2);
1640 
1641 XY = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
1642 x = XY(:,1);
1643 y = XY(:,2);
1644 
1645 d_x = x-x_c;
1646 d_y = y-y_c;
1647 
1648 radius = d_x.*d_x+d_y.*d_y;
1649 [C,I] = min(radius);
1650 <span class="keyword">if</span> C &lt;= 0.05; <span class="comment">% Hardcoded value!</span>
1651  
1652     <span class="keyword">if</span> strcmp(get(handles.output, <span class="string">'SelectionType'</span>), <span class="string">'normal'</span>)
1653         <span class="comment">%  disp(I);</span>
1654         move_index = I;
1655         botton_down = 1;
1656         start_index = 0; <span class="comment">% Reset starting index</span>
1657         
1658     <span class="keyword">elseif</span> strcmp(get(handles.output, <span class="string">'SelectionType'</span>), <span class="string">'alt'</span>)
1659         <span class="keyword">if</span> start_index
1660             <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/has.html" class="code" title="function yn = has(g,u,v,dir)">has</a>(g, start_index, I) <span class="comment">%no additional request for the case of directed graphs necessary</span>
1661                 <span class="keyword">switch</span> modus
1662                     <span class="keyword">case</span> <span class="string">'undirected'</span>;
1663                         <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,start_index, I);
1664                     <span class="keyword">case</span> <span class="string">'directed'</span>;
1665                         <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,start_index, I,1);
1666                 <span class="keyword">end</span>
1667             <span class="keyword">else</span>
1668                 <span class="keyword">switch</span> modus
1669                     <span class="keyword">case</span> <span class="string">'undirected'</span>;
1670                         <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,start_index,I);
1671                     <span class="keyword">case</span> <span class="string">'directed'</span>;
1672                         <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,start_index,I,1);
1673                 <span class="keyword">end</span>
1674             <span class="keyword">end</span>
1675             start_index = 0;
1676             <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1677         <span class="keyword">else</span>
1678             start_index = I;
1679         <span class="keyword">end</span>
1680         
1681     <span class="keyword">elseif</span> strcmp(get(handles.output, <span class="string">'SelectionType'</span>), <span class="string">'open'</span>)
1682         <span class="comment">% Opens EDIT_NODE(): node modification dialog</span>
1683         [s1,nodenumber,nodelabel,template,neighbours,destroy,templateSaved,<span class="keyword">...</span>
1684             printVector,plotParams,newTemplate] = <a href="../mtids/subfunctions/figures/edit_node.html" class="code" title="function varargout = edit_node(varargin)">edit_node</a>(I, <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g,I), <span class="keyword">...</span>
1685             templates(I,:), template_list, g(I), printCell(I,:),handles.figure1 );
1686         <span class="keyword">if</span> ~all( cellfun(@isequal,newTemplate,templates(I,:)) )
1687             data.expSucc = 0;
1688             data.simOut = [];
1689         <span class="keyword">end</span>
1690         templates(I,:) = newTemplate;
1691         <span class="keyword">if</span> destroy == 0
1692             <span class="keyword">if</span> ~strcmp(nodelabel, <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g,I))
1693                 <span class="keyword">if</span>(strmatch(nodelabel,<a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g),<span class="string">'exact'</span>))
1694                     <span class="keyword">for</span> i=1:<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g)
1695                         <span class="keyword">if</span> (strmatch(strcat(nodelabel, num2str(i)),<a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g),<span class="string">'exact'</span>))
1696                             <span class="keyword">continue</span>;
1697                         <span class="keyword">else</span>
1698                             nodelabel = strcat(nodelabel, num2str(i));
1699                             <span class="keyword">break</span>;
1700                         <span class="keyword">end</span>
1701                     <span class="keyword">end</span>
1702                 <span class="keyword">end</span>
1703             <span class="keyword">end</span>
1704             
1705             <a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>(g,I, nodelabel);
1706             
1707             templates{I} = template;
1708             e_delete = g(I);
1709             size_ne = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(e_delete,2);
1710             
1711             <span class="keyword">if</span> ~strcmp(<span class="string">'double'</span>,class(neighbours))
1712                 <span class="comment">%disp(['Class of variable &quot;neighbour&quot; is not &quot;double&quot;.']);</span>
1713                 neighbours = eval(neighbours); <span class="comment">%neighbours must be of type &quot;double&quot;</span>
1714             <span class="keyword">end</span>
1715             
1716             <span class="keyword">for</span> i=1:size_ne
1717                 <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,I,e_delete(i));
1718             <span class="keyword">end</span>           
1719             size_ne = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(neighbours,2);          
1720             <span class="keyword">if</span> ~strcmp(neighbours, <span class="string">'[]'</span>)
1721                 <span class="keyword">for</span> i=1:size_ne
1722                     <span class="keyword">if</span> strcmp( data.modus,<span class="string">'directed'</span>)
1723                         <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,I,neighbours(i),1);
1724                     <span class="keyword">else</span>
1725                         <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,I,neighbours(i));
1726                     <span class="keyword">end</span>
1727                 <span class="keyword">end</span>
1728             <span class="keyword">end</span>
1729             <span class="comment">%assignin('base','printVector',printVector);</span>
1730             <span class="comment">%Provide here the new plotting information</span>
1731             printCell(nodenumber,1) = num2cell(printVector,2);
1732             printCell{nodenumber,2} = plotParams;           
1733             <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);            
1734         <span class="keyword">elseif</span> destroy == 1
1735             <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &amp;&amp; (I &lt;= <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g))
1736                 templates(I,:) = []; <span class="comment">% Deleting a template</span>
1737                 <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(g,I);              
1738                 <span class="comment">%Here, the i-th entry of the printCell must be deleted too</span>
1739                 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(printCell,1) == 1
1740                     printCell = cell(0,2);
1741                 <span class="keyword">else</span>
1742                     length_printCell = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(printCell,1);
1743                     <span class="comment">% disp(['Length of printCell: ' num2str(length_printCell) ]);</span>
1744                     temp_printCell = printCell;
1745                     printCell = cell(length_printCell-1,2);
1746                     <span class="keyword">for</span> i = 1:(nodenumber-1)
1747                         printCell(i,:) = temp_printCell(i,:);
1748                     <span class="keyword">end</span>
1749                     <span class="keyword">for</span> i = (nodenumber+1):length_printCell
1750                         printCell(i-1,:) = temp_printCell(i,:);
1751                     <span class="keyword">end</span>
1752                 <span class="keyword">end</span>               
1753                 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1754             <span class="keyword">end</span>           
1755         <span class="keyword">end</span> <span class="comment">%if destroy == 0</span>
1756         <span class="keyword">if</span> templateSaved
1757             template_list = <a href="../mtids/subfunctions/mtids_main/readImportedTemplates.html" class="code" title="function varargout = readImportedTemplates( varargin )">readImportedTemplates</a>( template_list );
1758         <span class="keyword">end</span>
1759         <span class="comment">%}</span>
1760     <span class="keyword">end</span>
1761 <span class="keyword">else</span> <span class="comment">% do nothing?</span>
1762   
1763 <span class="keyword">end</span>
1764  
1765 <span class="keyword">if</span> strcmp(get(handles.output, <span class="string">'SelectionType'</span>), <span class="string">'extend'</span>)
1766     start_button = 0;
1767     button_down = 0;
1768     <a href="#_sub4" class="code" title="subfunction newnode_Callback(hObject, eventdata, handles)">newnode_Callback</a>(hObject, eventdata, handles);
1769     data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1770     XY(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),1) = x_c;
1771     XY(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g),2) = y_c;
1772     <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g,XY);
1773     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1774     data.g = g;
1775     setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1776     guidata(hObject, handles);
1777     <span class="keyword">return</span>
1778 <span class="keyword">end</span>
1779 
1780 <span class="comment">%store application data</span>
1781 data.g = g;
1782 data.templates = templates;
1783 data.botton_down = botton_down;
1784 data.move_index = move_index;
1785 data.start_index = start_index;
1786 data.templates = templates;
1787 data.template_list = template_list;
1788 data.modus = modus;
1789 data.printCell = printCell;
1790 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1791 guidata(hObject, handles);
1792 <a href="../mtids/subfunctions/computeInputSizes.html" class="code" title="function computeInputSizes( handles )">computeInputSizes</a>(handles);
1793 <a href="#_sub44" class="code" title="subfunction refresh_valueSet(handles)">refresh_valueSet</a>( handles );
1794 
1795 
1796 <span class="comment">% --- Executes on mouse press over figure background, over a disabled or</span>
1797 <span class="comment">% --- inactive control, or over an axes background.</span>
1798 <a name="_sub47" href="#_subfunctions" class="code">function figure1_WindowButtonUpFcn(hObject, eventdata, handles)</a>
1799 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
1800 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1801 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1802 
1803 <span class="comment">%load application data</span>
1804 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1805 g = data.g;
1806 botton_down = 0;
1807 
1808 <span class="comment">%store application data</span>
1809 data.g = g;
1810 data.botton_down = botton_down;
1811 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1812 guidata(hObject, handles);
1813 
1814 <span class="comment">% --- Executes on mouse motion over figure - except title and menu.</span>
1815 <a name="_sub48" href="#_subfunctions" class="code">function figure1_WindowButtonMotionFcn(hObject, eventdata, handles)</a>
1816 <span class="comment">% hObject    handle to figure1 (see GCBO)</span>
1817 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1818 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1819 <span class="comment">%load application data</span>
1820 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1821 botton_down = data.botton_down;
1822 move_index = data.move_index;
1823 g = data.g;
1824 
1825 <span class="keyword">if</span> botton_down
1826     CP = get(handles.axes1, <span class="string">'CurrentPoint'</span>);
1827     x_c = CP(1,1);
1828     y_c = CP(1,2);
1829     XY = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
1830     XY(move_index,1) = x_c;
1831     XY(move_index,2) = y_c;
1832     <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g,XY);
1833     <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1834 <span class="keyword">end</span>
1835 
1836 <span class="comment">%store application data</span>
1837 data.botton_down = botton_down;
1838 data.move_index = move_index;
1839 data.g = g;
1840 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1841 guidata(hObject, handles);  
1842 
1843 
1844 <span class="comment">% --------------------------------------------------------------------</span>
1845 <a name="_sub49" href="#_subfunctions" class="code">function export_as_layer_Callback(hObject, eventdata, handles)</a>
1846 <span class="comment">% hObject    handle to export_as_layer (see GCBO)</span>
1847 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1848 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1849 
1850 <span class="comment">%load application data</span>
1851 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1852 g = data.g;
1853 templates = data.templates;
1854 template_list = data.template_list;
1855 
1856 A  = double(<a href="../mtids/subfunctions/matgraph/@graph/matrix.html" class="code" title="function A = matrix(g)">matrix</a>(g));
1857 <a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>(g);
1858 <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g);
1859 xy = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
1860 
1861 labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
1862 name =    <span class="string">'untitled'</span>;
1863 template =<span class="string">'LTI'</span>; 
1864 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 200
1865     disp(<span class="string">'Exporting...may take some time...go get some coffee...'</span>);
1866 <span class="keyword">else</span>   
1867     disp(<span class="string">'Exporting...'</span>);
1868 <span class="keyword">end</span>
1869 disp(<span class="string">'  '</span>);
1870 <a href="../mtids/subfunctions/interface2Simulink/exportLayer.html" class="code" title="function[] =exportLayer(name,template,templateList,A, xy, labs)">exportLayer</a>(name,templates,template_list,A, xy, labs);
1871 
1872 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 50
1873     disp(<span class="string">'Done exporting'</span>);
1874     disp(<span class="string">' '</span>);
1875     <span class="comment">%msgbox('Done exporting','Export to Simulink');</span>
1876 <span class="keyword">else</span>   
1877     disp(<span class="string">'Done exporting'</span>);
1878 <span class="keyword">end</span>
1879 
1880 
1881 <span class="comment">% --- Executes on button press in update_graph_button.</span>
1882 <a name="_sub50" href="#_subfunctions" class="code">function update_graph_button_Callback(hObject, eventdata, handles)</a>
1883 <span class="comment">% hObject    handle to update_graph_button (see GCBO)</span>
1884 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1885 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1886 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(1, eventdata, handles,hObject);
1887 
1888 
1889 <span class="comment">% --------------------------------------------------------------------</span>
1890 <a name="_sub51" href="#_subfunctions" class="code">function export_to_simulink2_Callback(hObject, eventdata, handles)</a>
1891 <span class="comment">% hObject    handle to export_to_simulink2 (see GCBO)</span>
1892 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1893 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1894 
1895 <span class="comment">%load application data</span>
1896 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1897 g = data.g;
1898 templates = data.templates;
1899 template_list = data.template_list;
1900 <span class="comment">% disp('Export mode 2');</span>
1901 A  = double(<a href="../mtids/subfunctions/matgraph/@graph/matrix.html" class="code" title="function A = matrix(g)">matrix</a>(g));
1902 
1903 <span class="comment">% Makes the graph a circle</span>
1904 <a href="../mtids/subfunctions/matgraph/@graph/rmxy.html" class="code" title="function rmxy(g)">rmxy</a>(g);
1905 <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g);
1906 xy = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
1907 labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
1908 
1909 <span class="comment">% Invoke subroutine which checks the system and its parameters on consistency</span>
1910 <a href="../mtids/subfunctions/matgraph/@partition/check.html" class="code" title="function yn = check(p)">check</a> = <a href="../mtids/subfunctions/systemConsistencyTest.html" class="code" title="function varargout = systemConsistencyTest( handles,varargin )">systemConsistencyTest</a>( handles );
1911 
1912 <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@partition/check.html" class="code" title="function yn = check(p)">check</a>
1913     <span class="comment">% Determine system name</span>
1914     prompt = {<span class="string">'Enter name of system: '</span>};
1915     dlg_title = <span class="string">'Name of system'</span>;
1916     num_lines = 1;
1917     def = {<span class="string">'untitled'</span>};
1918     name = inputdlg(prompt,dlg_title,num_lines,def);
1919     <span class="keyword">if</span> isempty( name )
1920         name = def;
1921     <span class="keyword">end</span>
1922     <span class="comment">% template =    'LTI';</span>
1923     <span class="keyword">if</span> <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g) &gt; 200
1924         disp(<span class="string">'Exporting...this may take some time...'</span>);
1925     <span class="keyword">else</span>
1926         disp(<span class="string">'Exporting...'</span>);
1927     <span class="keyword">end</span>
1928     disp(<span class="string">'  '</span>);
1929     filename = <a href="../mtids/subfunctions/interface2Simulink/exportSimulink2.html" class="code" title="function varargout = exportSimulink2( varargin )">exportSimulink2</a>(name{:}, templates, template_list, A, xy, labs, data.flag_showSimMod);
1930     disp(<span class="string">'Done exporting'</span>);
1931     expSucc = 1;
1932 <span class="keyword">else</span>
1933     disp(<span class="string">'System consistency test failed'</span>);
1934     expSucc = 0;
1935 <span class="keyword">end</span>
1936 
1937 <span class="keyword">if</span> expSucc &amp;&amp; ~isempty( filename )
1938     data.sysFilename = filename;
1939 <span class="keyword">end</span>
1940 <span class="comment">%store application data</span>
1941 data.expSucc = expSucc;
1942 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
1943 guidata(hObject, handles); 
1944 
1945 
1946 <span class="comment">% --- Executes when selected object is changed in uipanel9.</span>
1947 <a name="_sub52" href="#_subfunctions" class="code">function uipanel9_SelectionChangeFcn(hObject, eventdata, handles)</a>
1948 <span class="comment">% hObject    handle to the selected object in uipanel9</span>
1949 <span class="comment">% eventdata  structure with the following fields (see UIBUTTONGROUP)</span>
1950 <span class="comment">%    EventName: string 'SelectionChanged' (read only)</span>
1951 <span class="comment">%    OldValue: handle of the previously selected object or empty if none was selected</span>
1952 <span class="comment">%    NewValue: handle of the currently selected object</span>
1953 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1954 <span class="comment">% Originally taken from the Help Menu &quot;Programming a button group&quot;</span>
1955 <span class="comment">% With it, the choice of which graphs are supported can be done</span>
1956 
1957 <span class="comment">%load application data</span>
1958 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
1959 
1960 <span class="keyword">switch</span> get(eventdata.NewValue,<span class="string">'Tag'</span>) <span class="comment">% Get Tag of selected object.</span>
1961     <span class="keyword">case</span> <span class="string">'button_undirected'</span>
1962         data.modus = <span class="string">'undirected'</span>;
1963         qstring = {<span class="string">'Preserve vertices?'</span>,<span class="string">'(Edges will be deleted in both cases)'</span>};
1964         choice = questdlg(qstring, <span class="keyword">...</span>
1965             <span class="string">'Change of graph modus'</span>, <span class="keyword">...</span>
1966             <span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'No'</span>);
1967         <span class="keyword">switch</span> choice
1968             <span class="keyword">case</span> <span class="string">'Yes'</span>;
1969                 <span class="comment">% Only delete edges</span>
1970                 elist = <a href="../mtids/subfunctions/matgraph/@graph/edges.html" class="code" title="function [elist] = edges(g,dir)">edges</a>(data.g,1);
1971                 <span class="keyword">for</span> ii = 1:<a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(elist,1)
1972                     <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>( data.g, elist(ii,1), elist(ii,2), 1 );
1973                 <span class="keyword">end</span>
1974             <span class="keyword">case</span> <span class="string">'No'</span>;
1975                 <span class="comment">% Delete entire graph</span>
1976                 <a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>(data.g,0);
1977                 data.printCell = cell(0,2);
1978                 data.nodeColor = cell(0,2);                
1979         <span class="keyword">end</span>     
1980         guidata(hObject, handles);
1981         <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1982     <span class="keyword">case</span> <span class="string">'button_directed'</span>
1983         data.modus = <span class="string">'directed'</span>;
1984         qstring = {<span class="string">'Preserve vertices?'</span>,<span class="string">'(Edges will be deleted in both cases)'</span>};
1985         choice = questdlg(qstring, <span class="keyword">...</span>
1986             <span class="string">'Change of graph modus'</span>, <span class="keyword">...</span>
1987             <span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'No'</span>);
1988         <span class="keyword">switch</span> choice
1989             <span class="keyword">case</span> <span class="string">'Yes'</span>;
1990                 elist = <a href="../mtids/subfunctions/matgraph/@graph/edges.html" class="code" title="function [elist] = edges(g,dir)">edges</a>(data.g,0);
1991                 <a href="../mtids/subfunctions/matgraph/@graph/delete.html" class="code" title="function delete(g,i,j,dir)">delete</a>(data.g,elist);
1992             <span class="keyword">case</span> <span class="string">'No'</span>;
1993                 <a href="../mtids/subfunctions/matgraph/@graph/resize.html" class="code" title="function resize(g, n)">resize</a>(data.g,0);
1994                 data.printCell = cell(0,2);
1995                 data.nodeColor = cell(0,2);
1996         <span class="keyword">end</span>
1997         guidata(hObject, handles);
1998         <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
1999     <span class="comment">% Continue with more cases as necessary.</span>
2000     <span class="keyword">otherwise</span>
2001         <span class="comment">% Code for when there is no match.</span>
2002         data.modus = <span class="string">'undirected'</span>;
2003 <span class="keyword">end</span>
2004 <span class="comment">%store application data</span>
2005 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2006 guidata(hObject, handles); 
2007 
2008 
2009 <span class="comment">% --------------------------------------------------------------------</span>
2010 <a name="_sub53" href="#_subfunctions" class="code">function run_simulation_Callback(hObject, eventdata, handles)</a>
2011 <span class="comment">% hObject    handle to run_simulation (see GCBO)</span>
2012 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2013 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2014 
2015 <span class="comment">%load application data</span>
2016 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2017 g = data.g;
2018 expSucc = data.expSucc;
2019 printCell = data.printCell;
2020 templates = data.templates;
2021 
2022 <span class="comment">%global g;</span>
2023 <span class="comment">%global printCell;</span>
2024 <span class="comment">%global templates;</span>
2025 <span class="comment">%global expSucc;</span>
2026 
2027 <span class="comment">%After export to simulink is complete, start the simulation, using the</span>
2028 <span class="comment">%plotting parameters in printCell</span>
2029 <span class="keyword">if</span> expSucc ~= 1
2030     msgbox(<span class="string">'Please start ''Export to Simulink'' before using this function.'</span>,<span class="string">'Notice'</span>);
2031 <span class="keyword">end</span>
2032 
2033 <span class="keyword">if</span> expSucc == 1
2034     <span class="comment">%We need: number of nodes, number of internal states per node</span>
2035     nrNodes = <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g);
2036     <span class="keyword">if</span> ~isfield(data,<span class="string">'simOut'</span>) || isempty(data.simOut)
2037         simOut = <a href="../mtids/subfunctions/performSimulation.html" class="code" title="function varargout = performSimulation( varargin )">performSimulation</a>( handles );
2038         data.simOut = simOut;
2039     <span class="keyword">else</span>
2040         simOut = data.simOut;
2041     <span class="keyword">end</span>
2042 
2043     <span class="comment">%Plotting of the simulation result can be done on different ways. For now,</span>
2044     <span class="comment">%every state gets its own figure</span>
2045     t = simOut.get(<span class="string">'tout'</span>);
2046     <span class="comment">% reshaping the states signals into X(value,noOfStates,noOfNode)</span>
2047     Xtemp = simOut.get(<span class="string">'xout'</span>);
2048     counter = 1;
2049     X = cell(nrNodes,1);
2050     <span class="keyword">for</span> i = 1:nrNodes
2051         noOfStates = data.templates{i,2}.dimension.states;
2052         X(i) = { Xtemp(:,counter:counter+noOfStates-1) };
2053         counter = counter + noOfStates;
2054     <span class="keyword">end</span>
2055     <span class="keyword">for</span> i = 1:nrNodes
2056         temp = printCell{i,1};
2057         <span class="keyword">if</span> any(temp)
2058             figure;
2059             hold on;
2060             <span class="comment">%Check if output of node i should be plotted</span>
2061             stringMatrix = cell(1,1);
2062             <span class="keyword">if</span> any(temp(1:data.templates{i,2}.dimension.outputs))
2063                 eval([<span class="string">'y = simOut.get(''nodeout'</span> num2str(i) <span class="string">''').signals.values;'</span>]);
2064                 outputsToPlot = <a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(y,2);
2065                 <span class="keyword">for</span> kk = 1:<a href="../mtids/subfunctions/matgraph/@graph/size.html" class="code" title="function [sz,tz] = size(g)">size</a>(y,2)
2066                     plot(t,y(:,kk),<span class="keyword">...</span>
2067                         <span class="string">'Color'</span>,printCell{i,2}(kk).lineColor,<span class="keyword">...</span>
2068                         <span class="string">'Linewidth'</span>,str2num(printCell{i,2}(kk).lineWidth),<span class="keyword">...</span>
2069                         <span class="string">'LineStyle'</span>,printCell{i,2}(kk).lineStyle,<span class="keyword">...</span>
2070                         <span class="string">'Marker'</span>,printCell{i,2}(kk).marker,<span class="keyword">...</span>
2071                         <span class="string">'MarkerEdgeColor'</span>,printCell{i,2}(kk).edgeColor ,<span class="keyword">...</span>
2072                         <span class="string">'MarkerFaceColor'</span>,printCell{i,2}(kk).faceColor); <span class="comment">%#ok&lt;*ST2NM&gt;</span>
2073                     stringMatrix{kk} = [<span class="string">'Output signal '</span> num2str(kk) <span class="string">' of node '</span> num2str(i)];
2074                 <span class="keyword">end</span>
2075             <span class="keyword">end</span>
2076             <span class="comment">%legend(['Output signal of node' num2str(i)]);</span>
2077             counterStringMatrix = outputsToPlot;
2078             <span class="keyword">for</span> kk = outputsToPlot+1:length( temp )
2079                 <span class="keyword">if</span> temp(kk)
2080                     counterStringMatrix = counterStringMatrix + 1;
2081                     plot(t,X{i}(:,kk-outputsToPlot),<span class="keyword">...</span>
2082                         <span class="string">'Color'</span>,printCell{i,2}(kk).lineColor,<span class="keyword">...</span>
2083                         <span class="string">'Linewidth'</span>,str2num(printCell{i,2}(kk).lineWidth),<span class="keyword">...</span>
2084                         <span class="string">'LineStyle'</span>,printCell{i,2}(kk).lineStyle,<span class="keyword">...</span>
2085                         <span class="string">'Marker'</span>,printCell{i,2}(kk).marker,<span class="keyword">...</span>
2086                         <span class="string">'MarkerEdgeColor'</span>,printCell{i,2}(kk).edgeColor ,<span class="keyword">...</span>
2087                         <span class="string">'MarkerFaceColor'</span>,printCell{i,2}(kk).faceColor);
2088                     stringMatrix{counterStringMatrix} = [<span class="string">'State '</span> num2str(kk-outputsToPlot) <span class="string">' of node '</span> num2str(i)];
2089                 <span class="keyword">end</span>
2090             <span class="keyword">end</span>
2091             legend(stringMatrix,<span class="string">'Location'</span>,<span class="string">'NorthEastOutside'</span>);
2092             xlabel(<span class="string">'Simulation time in [s]'</span>);
2093             ylabel([<span class="string">'Output and/or state of node '</span> num2str(i)]);
2094             
2095             hold off;
2096         <span class="keyword">end</span>
2097     <span class="keyword">end</span>
2098 <span class="keyword">end</span>
2099 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2100 
2101 
2102 
2103 <span class="comment">% --------------------------------------------------------------------</span>
2104 <a name="_sub54" href="#_subfunctions" class="code">function plotAllOutput_Callback(hObject, eventdata, handles)</a>
2105 <span class="comment">% hObject    handle to plotAllOutput (see GCBO)</span>
2106 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2107 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2108 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2109 
2110 <span class="keyword">if</span> strcmp(get(handles.plotAllOutput,<span class="string">'Checked'</span>),<span class="string">'on'</span>)
2111     set(handles.plotAllOutput,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
2112     plotAllOutput = 0;
2113 <span class="keyword">else</span>
2114     set(handles.plotAllOutput,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
2115     plotAllOutput = 1;
2116 <span class="keyword">end</span>
2117 <span class="comment">%store application data</span>
2118 data.plotAllOutput = plotAllOutput;
2119 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2120 guidata(hObject, handles); 
2121 
2122 
2123 <span class="comment">% --------------------------------------------------------------------</span>
2124 <a name="_sub55" href="#_subfunctions" class="code">function run_simulation_plots_Callback(hObject, eventdata, handles)</a>
2125 <span class="comment">% hObject    handle to run_simulation_plots (see GCBO)</span>
2126 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2127 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2128 
2129 <span class="comment">%load application data</span>
2130 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2131 g = data.g;
2132 printCell = data.printCell;
2133 templates = s;
2134 expSucc = data.expSucc;
2135 
2136 <span class="comment">%global g;</span>
2137 <span class="comment">%global printCell;</span>
2138 <span class="comment">%global templates;</span>
2139 <span class="comment">%global expSucc;</span>
2140 <span class="keyword">global</span> xout;
2141 <span class="keyword">global</span> tout;
2142 
2143 
2144 <span class="comment">%After export to simulink is complete, start the simulation, using the</span>
2145 <span class="comment">%plotting parameters in printCell</span>
2146 <span class="keyword">if</span> expSucc ~= 1
2147     msgbox(<span class="string">'Please start Export to Simulink2 before using this function.'</span>,<span class="string">'Notice'</span>);
2148 <span class="keyword">end</span>
2149 
2150 <span class="keyword">if</span> expSucc == 1
2151     <span class="comment">%We need: number of nodes, number of internal states per node</span>
2152     nrNodes = <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g);
2153     intStates = zeros(nrNodes,1);
2154     <span class="keyword">for</span> i = 1:nrNodes
2155         intStates(i) = length(printCell{i,1})-1;
2156     <span class="keyword">end</span>
2157 
2158     <span class="comment">%t contains the simulation time, x the states in order of the nodenumbers.</span>
2159     <span class="comment">%The output of each %node is contained in the To Workspace struct nodeouti,</span>
2160     <span class="comment">%where i stands for the nodenumber</span>
2161     <span class="comment">%[t,x]=sim(gcs);</span>
2162 
2163     <span class="comment">%Plotting of the simulation result can be done on different ways. For now,</span>
2164     <span class="comment">%every state gets its own figure</span>
2165 
2166     <span class="keyword">for</span> i = 1:nrNodes
2167         <span class="comment">%Check printCell to see if visualization of state i is wanted</span>
2168         temp = printCell{i,1};
2169         <span class="keyword">if</span> any(temp)
2170         figure;
2171         hold on;
2172         y = evalin(<span class="string">'base'</span>,[<span class="string">'nodeout'</span> num2str(i) <span class="string">'.signals.values'</span>]);
2173         plot(tout,y,<span class="string">'Linewidth'</span>,2.0);
2174         <span class="comment">%legend(['Output signal of node' num2str(i)]);</span>
2175         xlabel(<span class="string">'Simulation time in [s]'</span>);
2176 
2177         <span class="keyword">if</span> strcmp(templates{i},<span class="string">'LTI'</span>)
2178             <span class="keyword">if</span> i == 1
2179                 index = 1;
2180             <span class="keyword">else</span>
2181                 index = 1+sum(intStates(1:(i-1)));
2182             <span class="keyword">end</span>
2183             x_loc = xout(:,index:index+intStates(i)-1); 
2184             <span class="comment">%Build string matrix for legend</span>
2185             stringMatrix = cell(1,1);
2186             stringMatrix{1} = [<span class="string">'Output signal of node '</span> num2str(i)];
2187             counterStringMatrix = 1;
2188             <span class="keyword">for</span> j=2:intStates(i)+1
2189                 <span class="keyword">if</span> temp(j) == 1
2190                     counterStringMatrix = counterStringMatrix + 1;
2191                     stringMatrix = [stringMatrix; cell(1,1)];
2192                     p=plot(t,x_loc(:,j-1),<span class="string">'Linewidth'</span>,1.2);
2193                     R = 0.1 + 0.5*rand;
2194                     G = 0.1 + 0.5*rand;
2195                     B = 0.1 + 0.5*rand;
2196                     set(p,<span class="string">'Color'</span>, [R G B] );
2197                     stringMatrix{counterStringMatrix} = [<span class="string">'State '</span> num2str(j-1) <span class="string">' of node '</span> num2str(i)];
2198                 <span class="keyword">end</span>
2199             <span class="keyword">end</span>
2200             legend(stringMatrix,<span class="string">'Location'</span>,<span class="string">'NorthEastOutside'</span>);
2201         <span class="keyword">else</span>
2202             legend([<span class="string">'Output signal of node '</span> num2str(i)]);
2203         <span class="keyword">end</span>
2204         hold off;
2205         <span class="keyword">end</span>
2206     <span class="keyword">end</span>
2207 <span class="keyword">end</span>
2208 
2209 <span class="comment">% --- Executes on button press in pushbutton17.</span>
2210 <span class="comment">% -- This button is only necessary for easily generating debugging output</span>
2211 <span class="comment">% -- it should be set to invisible or deleted after debugging</span>
2212 <a name="_sub56" href="#_subfunctions" class="code">function pushbutton17_Callback(hObject, eventdata, handles)</a>
2213 <span class="comment">% hObject    handle to pushbutton17 (see GCBO)</span>
2214 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2215 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2216       <span class="comment">%DEBUGGING</span>
2217 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2218 disp([<span class="string">'Number of nodes: '</span> num2str(<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(data.g)) ]);
2219 <span class="comment">%disp(['PrintCell: ' printCell(nodenumber)]);</span>
2220 assignin(<span class="string">'base'</span>,<span class="string">'data'</span>,data);
2221 
2222 <span class="comment">% --------------------------------------------------------------------</span>
2223 <a name="_sub57" href="#_subfunctions" class="code">function showSimMod_Callback(hObject, eventdata, handles) </a><span class="comment">%#ok&lt;*INUSL&gt;</span>
2224 <span class="comment">% hObject    handle to showSimMod (see GCBO)</span>
2225 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2226 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2227 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2228 <span class="keyword">if</span> strcmp(get(handles.showSimMod,<span class="string">'Checked'</span>),<span class="string">'on'</span>)
2229     set(handles.showSimMod,<span class="string">'Checked'</span>,<span class="string">'off'</span>)
2230     data.flag_showSimMod = 0;
2231 <span class="keyword">else</span>
2232     set(handles.showSimMod,<span class="string">'Checked'</span>,<span class="string">'on'</span>)
2233     data.flag_showSimMod = 1;
2234 <span class="keyword">end</span>
2235 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2236 guidata(hObject, handles);         
2237         
2238        
2239 <a name="_sub58" href="#_subfunctions" class="code">function load_settings(filename,handles)</a>
2240 <span class="comment">%data = getappdata(handles.figure1,'appData');</span>
2241 S=<a href="../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>(filename, <span class="string">'modus'</span>,<span class="string">'flag_showSimMod'</span>,<span class="string">'plotAllOutput'</span>,<span class="string">'template_list'</span>);
2242 data.modus = S.modus;
2243 data.flag_showSimMod = S.flag_showSimMod;
2244 data.plotAllOutput = S.plotAllOutput;
2245 data.template_list = S.template_list;
2246 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2247 
2248 <a name="_sub59" href="#_subfunctions" class="code">function save_settings(filename,handles)</a>
2249 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2250 <a href="../mtids/subfunctions/matgraph/@graph/save.html" class="code" title="function save(g,filename)">save</a>(filename, <span class="string">'-struct'</span>,<span class="string">'data'</span>, <span class="string">'modus'</span>, <span class="string">'flag_showSimMod'</span>,<span class="string">'plotAllOutput'</span>,<span class="keyword">...</span>
2251     <span class="string">'template_list'</span>);
2252 
2253 
2254 <a name="_sub60" href="#_subfunctions" class="code">function loadGraphAtOpening(hObject, eventdata, handles)</a>
2255 <span class="comment">% hObject    handle to loadgraph (see GCBO)</span>
2256 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2257 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2258 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2259 template_list = data.template_list;
2260 filename = <span class="string">'lastgraph.mat'</span>;
2261 pathname = [pwd filesep <span class="string">'resources'</span> filesep];
2262 <span class="keyword">if</span> ~isempty(filename)
2263     file = strcat(pathname, filename);
2264     [pathname, filename, ext] = fileparts(file);
2265     <span class="keyword">if</span> strcmp(ext, <span class="string">'.mat'</span>)
2266         S = <a href="../mtids/subfunctions/matgraph/@graph/load.html" class="code" title="function load(g,filename)">load</a>(file, <span class="string">'nverts'</span>, <span class="string">'nedges'</span>,<span class="string">'adj_matrix'</span>, <span class="string">'XY'</span>, <span class="string">'labs'</span>, <span class="string">'templates'</span>,<span class="keyword">...</span>
2267             <span class="string">'printCell'</span>,<span class="string">'template_list'</span>,<span class="string">'modus'</span>,<span class="string">'nodeColor'</span>) ;
2268         nverts = S.nverts;
2269         adj_matrix = S.adj_matrix;
2270         XY = S.XY;
2271         labs = S.labs;
2272         templates = S.templates;
2273         template_list = S.template_list;
2274         data.modus = S.modus;
2275         data.printCell = S.printCell;
2276         data.nodeColor = S.nodeColor;
2277         g = <a href="../mtids/subfunctions/matgraph/@graph/graph.html" class="code" title="function g = graph(n)">graph</a>(nverts);
2278         <span class="keyword">switch</span> data.modus;
2279             <span class="keyword">case</span> <span class="string">'undirected'</span>; dir = 0;
2280             <span class="keyword">case</span> <span class="string">'directed'</span>; dir = 1;
2281         <span class="keyword">end</span>
2282         <span class="keyword">for</span> i=1:nverts
2283             <a href="../mtids/subfunctions/matgraph/@graph/label.html" class="code" title="function label(g,v,name)">label</a>(g,i,labs{i});
2284             <span class="keyword">for</span> j=1:nverts
2285                 <span class="keyword">if</span> adj_matrix(i,j)
2286                     <a href="../mtids/subfunctions/matgraph/@graph/add.html" class="code" title="function add(g,i,j,dir)">add</a>(g,i,j,dir);
2287                     adj_matrix(j,i) = 0;
2288                 <span class="keyword">end</span>
2289             <span class="keyword">end</span>
2290         <span class="keyword">end</span>
2291         <a href="../mtids/subfunctions/matgraph/@graph/embed.html" class="code" title="function embed(g,xy)">embed</a>(g,XY);
2292     <span class="keyword">end</span>
2293 <span class="keyword">end</span>
2294 <span class="comment">%set the uipanel according to stored value of &quot;modus&quot;</span>
2295 <span class="keyword">switch</span> data.modus
2296     <span class="keyword">case</span> <span class="string">'directed'</span>
2297         set(handles.button_undirected,<span class="string">'Value'</span>, 0.0);
2298         set(handles.button_directed,<span class="string">'Value'</span>, 1.0);
2299     <span class="keyword">case</span> <span class="string">'undirected'</span>
2300         set(handles.button_undirected,<span class="string">'Value'</span>, 1.0);
2301         set(handles.button_directed,<span class="string">'Value'</span>, 0.0);        
2302 <span class="keyword">end</span>
2303 <span class="comment">%store application data</span>
2304 data.g = g;
2305 data.templates = templates;
2306 data.template_list = template_list;
2307 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2308 guidata(hObject, handles);
2309 
2310 
2311 <span class="comment">% --------------------------------------------------------------------</span>
2312 <a name="_sub61" href="#_subfunctions" class="code">function set_node_color_Callback(hObject, eventdata, handles)</a>
2313 <span class="comment">% hObject    handle to set_node_color (see GCBO)</span>
2314 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2315 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2316 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2317 temp = <a href="../mtids/subfunctions/figures/setnodecolor.html" class="code" title="function varargout = setnodecolor(varargin)">setnodecolor</a>(data.template_list);
2318 <span class="keyword">if</span> ~isempty(temp)
2319     data.template_list = temp;
2320     <span class="keyword">for</span> i = 1:<a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(data.g)
2321         nr_template = find( strcmp( data.templates(i), data.template_list(:,1) ));
2322         data.nodeColor{i,1} = data.template_list{nr_template,2}; 
2323         data.nodeColor{i,2} = data.template_list{nr_template,3}; 
2324     <span class="keyword">end</span>    
2325 <span class="keyword">end</span>
2326 
2327 guidata(hObject, handles);
2328 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2329 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
2330 
2331 
2332 <span class="comment">% --------------------------------------------------------------------</span>
2333 <a name="_sub62" href="#_subfunctions" class="code">function create_dynamic_Template_Callback(hObject, eventdata, handles)</a>
2334 <span class="comment">% hObject    handle to create_dynamic_Template (see GCBO)</span>
2335 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2336 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2337 <span class="comment">% out = dialog('WindowStyle', 'normal', 'Name', 'Open');</span>
2338 title = <span class="string">'Creation of new dynamic template'</span>;
2339 message = [<span class="string">'A new model in Simulink will be loaded now. Please leave Inport, Outport, '</span> <span class="keyword">...</span>
2340     <span class="string">'the Mux-Block at the Inport and the ''To Workspace''-Block unmodified. Save '</span>,<span class="keyword">...</span>
2341     <span class="string">'your work afterwards and open the import '</span> <span class="keyword">...</span>
2342     <span class="string">'wizard to use the created dynamics in mtids.'</span> <span class="keyword">...</span>
2343     <span class="string">'See ''help'' for detailed advise.'</span>];
2344 h1=msgbox(message,title,<span class="string">'help'</span>);
2345 posVector=get(h1,<span class="string">'OuterPosition'</span>);
2346 set(h1,<span class="string">'OuterPosition'</span>,posVector + [0 0 20 0]); <span class="comment">%[left, bottom, width, height]</span>
2347 simulink;
2348 open_system(<span class="string">'nodeTemplate.mdl'</span>);
2349 
2350 
2351 
2352 <span class="comment">% --------------------------------------------------------------------</span>
2353 <a name="_sub63" href="#_subfunctions" class="code">function template_import_wizard_Callback(hObject, eventdata, handles)</a>
2354 <span class="comment">% hObject    handle to template_import_wizard (see GCBO)</span>
2355 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2356 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2357 
2358 <span class="comment">% next step: load template invisibly from mdl-file</span>
2359 oldFolder = cd(strcat(pwd,<span class="string">'/templates'</span>));
2360 
2361 [filename, pathname] = uigetfile( <span class="keyword">...</span>
2362 {<span class="string">'*.mdl'</span>,<span class="string">'Simulink model template(*.mdl)'</span>;
2363    <span class="string">'*.*'</span>,  <span class="string">'All Files (*.*)'</span>}, <span class="keyword">...</span>
2364    <span class="string">'Import Simulink model templates'</span>, <span class="keyword">...</span>
2365    <span class="string">'MultiSelect'</span>, <span class="string">'on'</span>);
2366 
2367 <span class="comment">% disp(['Filename: ' filename]);</span>
2368 <span class="keyword">if</span> all( filename ~= 0 )
2369     load_system(filename);
2370 <span class="keyword">else</span>
2371     cd(oldFolder);
2372     <span class="keyword">return</span>
2373 <span class="keyword">end</span>
2374 
2375 <span class="comment">% check this file for unset parameter values - this is a prestep to the</span>
2376 <span class="comment">% dialog of asking for all needed parameters for this template</span>
2377 <span class="comment">% finds all blocks in the simulink model</span>
2378 blks = find_system(gcs, <span class="string">'Type'</span>, <span class="string">'block'</span>);
2379 listblks = get_param(blks, <span class="string">'BlockType'</span>);
2380 listnms = get_param(blks,<span class="string">'Name'</span>);
2381 
2382 <span class="comment">% is is very hard to show the variation of all editable parameters</span>
2383 <span class="comment">% thus just show the blocks and let the user type in which values should be</span>
2384 <span class="comment">% introduced as parameters for the template OR make a choice of possible</span>
2385 <span class="comment">% values, which are very likely</span>
2386 
2387 <span class="comment">% there are some blocks, which are very likely not to contain parameters,</span>
2388 <span class="comment">% which the user should set, e.g.:</span>
2389 <span class="comment">% Inport, Outport, Sum, Mux, Math</span>
2390 <span class="comment">% sort out these blocks:</span>
2391 listnms( ~cellfun( @isempty, regexp( listblks,<span class="keyword">...</span>
2392     <span class="string">'Inport|Outport|Sum|Mux|Math|Scope|ToWorkspace'</span>,<span class="string">'start'</span>)) ) = [];
2393 listblks( ~cellfun( @isempty, regexp( listblks,<span class="keyword">...</span>
2394     <span class="string">'Inport|Outport|Sum|Mux|Math|Scope|ToWorkspace'</span>,<span class="string">'start'</span>)) ) = [];
2395 
2396 <span class="comment">% create new figure and place found blocks in table environment</span>
2397 <span class="keyword">if</span> ~cellfun( @isempty, listblks )
2398     argout = <a href="../mtids/subfunctions/figures/import_dynamic_params.html" class="code" title="function varargout = import_dynamic_params(varargin)">import_dynamic_params</a>(listblks,listnms,filename,pathname); <span class="comment">%#ok&lt;NASGU&gt;</span>
2399 <span class="keyword">else</span>
2400     <span class="comment">% errordlg('No blocks with editable');</span>
2401 <span class="keyword">end</span>
2402 
2403 close_system(filename,0);
2404 cd(oldFolder);
2405 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2406 data.template_list = <a href="../mtids/subfunctions/mtids_main/readImportedTemplates.html" class="code" title="function varargout = readImportedTemplates( varargin )">readImportedTemplates</a>(data.template_list);
2407 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2408 <a href="#_sub43" class="code" title="subfunction refresh_dynamics(eventdata, handles)">refresh_dynamics</a>(eventdata, handles);
2409 
2410 <span class="comment">% --------------------------------------------------------------------</span>
2411 <a name="_sub64" href="#_subfunctions" class="code">function saveGraph(hObject, eventdata, handles, pathname, filename)</a>
2412 <span class="comment">% hObject    handle to savegraphas (see GCBO)</span>
2413 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2414 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2415 
2416 <span class="comment">%load application data</span>
2417 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2418 g = data.g;
2419 templates = data.templates;
2420 template_list = data.template_list;
2421 modus = data.modus;
2422 printCell = data.printCell;
2423 
2424 <span class="keyword">if</span> filename
2425      file = strcat(pathname, filename);
2426      [pathname, filename, ext] = fileparts(file);
2427      <span class="comment">%save(g, file);</span>
2428 
2429      adj_matrix = double(<a href="../mtids/subfunctions/matgraph/@graph/matrix.html" class="code" title="function A = matrix(g)">matrix</a>(g));
2430      labs = <a href="../mtids/subfunctions/matgraph/@graph/get_label.html" class="code" title="function out = get_label(g,v)">get_label</a>(g);
2431      XY = <a href="../mtids/subfunctions/matgraph/@graph/getxy.html" class="code" title="function z = getxy(g)">getxy</a>(g);
2432      nverts = <a href="../mtids/subfunctions/matgraph/@graph/nv.html" class="code" title="function n = nv(g)">nv</a>(g);
2433      nedges = <a href="../mtids/subfunctions/matgraph/@graph/ne.html" class="code" title="function m = ne(g,dir,h)">ne</a>(g);
2434      nodeColor = data.nodeColor;
2435 
2436      <span class="keyword">if</span> strcmp(ext, <span class="string">'.mat'</span>)
2437         <span class="comment">%save(file, 'data' );</span>
2438         <a href="../mtids/subfunctions/matgraph/@graph/save.html" class="code" title="function save(g,filename)">save</a>(file, <span class="string">'nverts'</span>, <span class="string">'nedges'</span>,<span class="string">'adj_matrix'</span>, <span class="string">'XY'</span>, <span class="string">'labs'</span>, <span class="string">'templates'</span>,<span class="keyword">...</span>
2439             <span class="string">'printCell'</span>,<span class="string">'template_list'</span>,<span class="string">'modus'</span>,<span class="string">'nodeColor'</span>) ;
2440 <span class="comment">%         disp(strcat('Saved graph as binary .mat file (&quot;', file,'&quot;)'));</span>
2441      <span class="keyword">elseif</span> strcmp(ext, <span class="string">'.gr'</span>)
2442         <a href="../mtids/subfunctions/matgraph/@graph/save.html" class="code" title="function save(g,filename)">save</a>(g, file);
2443         disp(strcat(<span class="string">'Saved graph as Matgraph file (&quot;'</span>, file,<span class="string">'&quot;)'</span>));
2444      <span class="keyword">end</span>
2445 <span class="keyword">end</span>
2446 <a href="#_sub27" class="code" title="subfunction refresh_graph(reset, eventdata, handles,hObject)">refresh_graph</a>(0, eventdata, handles,hObject);
2447 
2448 <span class="comment">% --------------------------------------------------------------------</span>
2449 <a name="_sub65" href="#_subfunctions" class="code">function menu_manageParamSets_Callback(hObject, eventdata, handles)</a>
2450 <span class="comment">% hObject    handle to menu_manageParamSets (see GCBO)</span>
2451 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2452 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2453 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2454 <a href="../mtids/subfunctions/figures/manageParamSets.html" class="code" title="function varargout = manageParamSets(varargin)">manageParamSets</a>(<a href="../mtids/subfunctions/mtids_main/readImportedTemplates.html" class="code" title="function varargout = readImportedTemplates( varargin )">readImportedTemplates</a>(data.template_list));
2455 data.template_list = <a href="../mtids/subfunctions/mtids_main/readImportedTemplates.html" class="code" title="function varargout = readImportedTemplates( varargin )">readImportedTemplates</a>(data.template_list);
2456 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2457 <a href="#_sub43" class="code" title="subfunction refresh_dynamics(eventdata, handles)">refresh_dynamics</a>([], handles);
2458 
2459 <span class="comment">% --------------------------------------------------------------------</span>
2460 <a name="_sub66" href="#_subfunctions" class="code">function get_simParams_Callback(hObject, eventdata, handles)</a>
2461 <span class="comment">% hObject    handle to get_simParams (see GCBO)</span>
2462 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2463 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2464 data = getappdata(handles.figure1,<span class="string">'appData'</span>);
2465 <span class="comment">% sysname means the name of an arbitrary template, which is used in mtids.</span>
2466 <span class="comment">% it's just for getting a configuration set for simulink out of it</span>
2467 sysname = [data.template_list{1,1} <span class="string">'_CHECKED'</span>];
2468 <span class="keyword">if</span> isfield( data,<span class="string">'simPrms'</span> )
2469     oldPrms = data.simPrms;
2470 <span class="keyword">else</span>
2471     oldPrms = [];
2472 <span class="keyword">end</span>
2473 data.simPrms = <a href="../mtids/subfunctions/figures/editSimParams.html" class="code" title="function varargout = editSimParams(varargin)">editSimParams</a>( sysname,oldPrms );
2474 setappdata(handles.figure1,<span class="string">'appData'</span>,data);
2475 
2476 <span class="comment">%--------------------------------------------------------------------------</span>
2477 <span class="comment">%-------UNUSED FUNCTION CALLBACKS - AUTOMATICALLY GENERATED BY GUIDE-------</span>
2478 <span class="comment">%--------------------------------------------------------------------------</span>
2479 
2480 <a name="_sub67" href="#_subfunctions" class="code">function radiobutton7_Callback(hObject, eventdata, handles)</a>
2481 
2482 <a name="_sub68" href="#_subfunctions" class="code">function tonode_Callback(hObject, eventdata, handles)</a>
2483 
2484 <a name="_sub69" href="#_subfunctions" class="code">function fromnode_Callback(hObject, eventdata, handles)</a>
2485 
2486 <a name="_sub70" href="#_subfunctions" class="code">function Untitled_10_Callback(hObject, eventdata, handles)</a>
2487 
2488 <a name="_sub71" href="#_subfunctions" class="code">function file_Callback(hObject, eventdata, handles)</a>
2489 
2490 <a name="_sub72" href="#_subfunctions" class="code">function Untitled_9_Callback(hObject, eventdata, handles)</a>
2491 
2492 <a name="_sub73" href="#_subfunctions" class="code">function Untitled_11_Callback(hObject, eventdata, handles)</a>
2493 
2494 <a name="_sub74" href="#_subfunctions" class="code">function generatesimulinkmdl_Callback(hObject, eventdata, handles)</a>
2495 
2496 <a name="_sub75" href="#_subfunctions" class="code">function Untitled_12_Callback(hObject, eventdata, handles)</a>
2497 
2498 <a name="_sub76" href="#_subfunctions" class="code">function figure1_ResizeFcn(hObject, eventdata, handles)</a>
2499 
2500 <a name="_sub77" href="#_subfunctions" class="code">function listbox1_Callback(hObject, eventdata, handles)</a>
2501 
2502 <a name="_sub78" href="#_subfunctions" class="code">function about_Callback(hObject, eventdata, handles)</a>
2503 
2504 <a name="_sub79" href="#_subfunctions" class="code">function adddynamics_Callback(hObject, eventdata, handles)</a>
2505 
2506 <a name="_sub80" href="#_subfunctions" class="code">function dynamicsimporter_Callback(hObject, eventdata, handles)</a>
2507 
2508 <a name="_sub81" href="#_subfunctions" class="code">function checkbox2_Callback(hObject, eventdata, handles)</a>
2509 
2510 <a name="_sub82" href="#_subfunctions" class="code">function figure1_KeyPressFcn(hObject, eventdata, handles)</a>
2511 
2512 <a name="_sub83" href="#_subfunctions" class="code">function Savegraph_Callback(hObject, eventdata, handles)</a>
2513 
2514 <a name="_sub84" href="#_subfunctions" class="code">function Untitled_17_Callback(hObject, eventdata, handles)</a>
2515 
2516 <a name="_sub85" href="#_subfunctions" class="code">function viewmenu_Callback(hObject, eventdata, handles)</a>
2517 
2518 <a name="_sub86" href="#_subfunctions" class="code">function editnode_Callback(hObject, eventdata, handles)</a>
2519 
2520 <a name="_sub87" href="#_subfunctions" class="code">function Untitled_13_Callback(hObject, eventdata, handles)</a>
2521 
2522 <a name="_sub88" href="#_subfunctions" class="code">function Untitled_14_Callback(hObject, eventdata, handles)</a>
2523 
2524 <a name="_sub89" href="#_subfunctions" class="code">function click_add_node_long_Callback(hObject, eventdata, handles)</a>
2525 
2526 <a name="_sub90" href="#_subfunctions" class="code">function remnode_Callback(hObject, eventdata, handles)</a>
2527 
2528 <a name="_sub91" href="#_subfunctions" class="code">function dynamic_label_Callback(hObject, eventdata, handles)</a>
2529 
2530 <a name="_sub92" href="#_subfunctions" class="code">function number_of_nodes_Callback(hObject, eventdata, handles)</a>
2531 
2532 <a name="_sub93" href="#_subfunctions" class="code">function selector_valueSet_Callback(hObject, eventdata, handles) </a><span class="comment">%#ok&lt;*DEFNU,*INUSD&gt;</span>
2533 
2534 
2535 <span class="comment">%%%%%%%%%</span>
2536</pre></div>
<hr><address>Generated on Mon 01-Oct-2012 17:13:50 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>